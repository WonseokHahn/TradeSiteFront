"use strict";(self["webpackChunktrade_frontend"]=self["webpackChunktrade_frontend"]||[]).push([[60],{60:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var r=o(6768),a=o(4232);const s={class:"auth-callback"},n={class:"callback-container"},l={class:"callback-content"},i={class:"callback-title"},c={class:"callback-message"},u={key:0,class:"debug-info"};function h(e,t,o,h,d,g){return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",n,[(0,r.Lk)("div",l,[t[1]||(t[1]=(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1)),(0,r.Lk)("h2",i,(0,a.v_)(d.title),1),(0,r.Lk)("p",c,(0,a.v_)(d.message),1),d.showDebug?((0,r.uX)(),(0,r.CE)("div",u,[t[0]||(t[0]=(0,r.Lk)("h4",null,"디버그 정보:",-1)),(0,r.Lk)("pre",null,(0,a.v_)(d.debugInfo),1)])):(0,r.Q3)("",!0)])])])}o(4603),o(7566),o(8721);var d=o(782),g={name:"AuthCallback",data(){return{title:"로그인 처리 중...",message:"잠시만 기다려주세요.",showDebug:!1,debugInfo:{}}},async mounted(){console.log("🎬 AuthCallback 컴포넌트 마운트됨"),await this.handleAuthCallback()},methods:{...(0,d.i0)("auth",["loginWithToken"]),async handleAuthCallback(){try{console.log("🔄 OAuth 콜백 처리 시작");const e=new URLSearchParams(window.location.search),t=e.get("token")||this.$route.query.token,o=e.get("provider")||this.$route.query.provider,r=e.get("name")||this.$route.query.name,a=e.get("error")||this.$route.query.error;if(this.debugInfo={url:window.location.href,queryParams:this.$route.query,urlParams:Object.fromEntries(e),token:t?t.substring(0,20)+"...":"null",provider:o,name:"미연동 계정"===r?"한원석":r?decodeURIComponent(r):"null",error:a},a)throw new Error(`OAuth 오류: ${a}`);if(!t)throw this.showDebug=!0,new Error("토큰이 없습니다. URL 파라미터를 확인해주세요.");console.log("🔐 OAuth 제공자:",o),console.log("👤 사용자 이름:",decodeURIComponent(r||"")),this.message="토큰을 처리하고 있습니다...";const s=await this.loginWithToken(t);if(!s)throw new Error("토큰 처리에 실패했습니다.");console.log("✅ 로그인 성공! 홈으로 이동"),this.title="로그인 완료!",this.message="홈페이지로 이동합니다...",setTimeout(()=>{this.$router.replace("/")},2e3)}catch(e){console.error("❌ Auth callback 오류:",e),this.title="로그인 오류",this.message=`오류: ${e.message}`,this.showDebug=!0,setTimeout(()=>{this.$router.replace({name:"Login",query:{error:"callback_failed"}})},5e3)}}}},k=o(1241);const b=(0,k.A)(g,[["render",h],["__scopeId","data-v-6e08d704"]]);var m=b}}]);
//# sourceMappingURL=60.e3f3ed25.js.map