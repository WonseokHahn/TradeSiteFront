"use strict";(self["webpackChunktrade_frontend"]=self["webpackChunktrade_frontend"]||[]).push([[146],{146:function(a,t,s){s.r(t),s.d(t,{default:function(){return Wa}});var e=s(6768),r=s(4232);const l={class:"trading"},i={class:"container"},o={class:"status-dashboard"},c={class:"status-cards"},n={class:"status-card"},d={class:"status-content"},u={class:"status-card"},v={class:"status-content"},k={class:"status-value"},g={class:"status-card"},p={class:"status-content"},L={class:"status-value"},y={class:"status-card"},h={class:"status-content"},m={class:"status-value"},b={class:"strategy-section"},f={class:"history-section"},C={class:"card"},T={class:"card-header"},S={class:"header-actions"},_=["disabled"],w={class:"card-body"},A={key:0,class:"loading-state"},E={key:1,class:"empty-state"},X={key:2,class:"orders-container"},I={class:"orders-table desktop-only"},x={class:"table-cell"},V={class:"table-cell"},M={class:"stock-info"},N={class:"stock-name"},H={class:"table-cell"},B={class:"table-cell"},D={class:"table-cell"},U={class:"table-cell"},F={class:"table-cell"},z={class:"table-cell"},P={class:"orders-cards mobile-only"},$={class:"order-header"},Q={class:"stock-info"},O={class:"stock-name"},q={class:"order-details"},K={class:"detail-row"},G={class:"detail-row"},R={class:"detail-row"},W={class:"detail-row"},J={class:"total-amount"},Y={class:"order-footer"},Z={class:"order-time"},j={key:0,class:"show-more"};function aa(a,t,s,aa,ta,sa){const ea=(0,e.g2)("TradingStrategy");return(0,e.uX)(),(0,e.CE)("div",l,[(0,e.Lk)("div",i,[t[19]||(t[19]=(0,e.Lk)("div",{class:"page-header"},[(0,e.Lk)("h1",{class:"page-title"},"자동매매 관리"),(0,e.Lk)("p",{class:"page-subtitle"}," AI 기반 투자 전략을 설정하고 자동매매를 실행하세요 ")],-1)),(0,e.Lk)("div",o,[(0,e.Lk)("div",c,[(0,e.Lk)("div",n,[t[3]||(t[3]=(0,e.Lk)("div",{class:"status-icon trading"},[(0,e.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,e.Lk)("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})])],-1)),(0,e.Lk)("div",d,[t[2]||(t[2]=(0,e.Lk)("h3",{class:"status-title"},"매매 상태",-1)),(0,e.Lk)("p",{class:(0,r.C4)(["status-value",{active:a.isTrading,inactive:!a.isTrading}])},(0,r.v_)(a.isTrading?"실행 중":"대기 중"),3)])]),(0,e.Lk)("div",u,[t[5]||(t[5]=(0,e.Lk)("div",{class:"status-icon strategy"},[(0,e.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,e.Lk)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),(0,e.Lk)("div",v,[t[4]||(t[4]=(0,e.Lk)("h3",{class:"status-title"},"활성 전략",-1)),(0,e.Lk)("p",k,(0,r.v_)(a.currentStrategy?a.currentStrategy.strategy_name:"없음"),1)])]),(0,e.Lk)("div",g,[t[7]||(t[7]=(0,e.Lk)("div",{class:"status-icon region"},[(0,e.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,e.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})])],-1)),(0,e.Lk)("div",p,[t[6]||(t[6]=(0,e.Lk)("h3",{class:"status-title"},"투자 지역",-1)),(0,e.Lk)("p",L,(0,r.v_)(a.currentStrategy?"domestic"===a.currentStrategy.region?"국내":"해외":"-"),1)])]),(0,e.Lk)("div",y,[t[9]||(t[9]=(0,e.Lk)("div",{class:"status-icon orders"},[(0,e.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,e.Lk)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})])],-1)),(0,e.Lk)("div",h,[t[8]||(t[8]=(0,e.Lk)("h3",{class:"status-title"},"총 매매 건수",-1)),(0,e.Lk)("p",m,(0,r.v_)(ta.tradingHistory.length)+"건 ",1)])])])]),(0,e.Lk)("div",b,[(0,e.bF)(ea)]),(0,e.Lk)("div",f,[(0,e.Lk)("div",C,[(0,e.Lk)("div",T,[t[11]||(t[11]=(0,e.Lk)("h2",{class:"card-title"},"최근 매매 이력",-1)),(0,e.Lk)("div",S,[(0,e.Lk)("button",{onClick:t[0]||(t[0]=(...a)=>sa.refreshHistory&&sa.refreshHistory(...a)),class:"btn btn-sm btn-outline",disabled:ta.historyLoading},t[10]||(t[10]=[(0,e.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[(0,e.Lk)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1),(0,e.eW)(" 새로고침 ",-1)]),8,_)])]),(0,e.Lk)("div",w,[ta.historyLoading?((0,e.uX)(),(0,e.CE)("div",A,t[12]||(t[12]=[(0,e.Lk)("div",{class:"loading-spinner-large"},null,-1),(0,e.Lk)("p",null,"매매 이력을 불러오는 중...",-1)]))):sa.hasOrders?((0,e.uX)(),(0,e.CE)("div",X,[(0,e.Lk)("div",I,[t[14]||(t[14]=(0,e.Fv)('<div class="table-header" data-v-7ae95aaa><div class="table-cell" data-v-7ae95aaa>시간</div><div class="table-cell" data-v-7ae95aaa>종목</div><div class="table-cell" data-v-7ae95aaa>지역</div><div class="table-cell" data-v-7ae95aaa>구분</div><div class="table-cell" data-v-7ae95aaa>수량</div><div class="table-cell" data-v-7ae95aaa>가격</div><div class="table-cell" data-v-7ae95aaa>총액</div><div class="table-cell" data-v-7ae95aaa>상태</div></div>',1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(sa.displayedOrders,a=>((0,e.uX)(),(0,e.CE)("div",{key:a.id,class:"table-row"},[(0,e.Lk)("div",x,(0,r.v_)(sa.formatDateTime(a.executed_at||a.created_at)),1),(0,e.Lk)("div",V,[(0,e.Lk)("div",M,[(0,e.Lk)("strong",null,(0,r.v_)(a.stock_code),1),(0,e.Lk)("span",N,(0,r.v_)(a.stock_name||"종목명"),1)])]),(0,e.Lk)("div",H,[(0,e.Lk)("span",{class:(0,r.C4)(["region-badge",a.region])},(0,r.v_)("domestic"===a.region?"🇰🇷 국내":"🌍 해외"),3)]),(0,e.Lk)("div",B,[(0,e.Lk)("span",{class:(0,r.C4)(["order-type",a.order_type?a.order_type.toLowerCase():""])},(0,r.v_)("BUY"===a.order_type?"매수":"매도"),3)]),(0,e.Lk)("div",D,(0,r.v_)(sa.formatNumber(a.quantity))+"주 ",1),(0,e.Lk)("div",U,(0,r.v_)(sa.formatPrice(a.executed_price||a.order_price,a.region)),1),(0,e.Lk)("div",F,(0,r.v_)(sa.formatPrice(a.total_amount,a.region)),1),(0,e.Lk)("div",z,[(0,e.Lk)("span",{class:(0,r.C4)(["order-status",a.status?a.status.toLowerCase():""])},(0,r.v_)(sa.getStatusText(a.status)),3)])]))),128))]),(0,e.Lk)("div",P,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(sa.displayedOrders,a=>((0,e.uX)(),(0,e.CE)("div",{key:a.id,class:"order-card"},[(0,e.Lk)("div",$,[(0,e.Lk)("div",Q,[(0,e.Lk)("strong",null,(0,r.v_)(a.stock_code),1),(0,e.Lk)("span",O,(0,r.v_)(a.stock_name||"종목명"),1)]),(0,e.Lk)("span",{class:(0,r.C4)(["region-badge",a.region])},(0,r.v_)("domestic"===a.region?"🇰🇷":"🌍"),3)]),(0,e.Lk)("div",q,[(0,e.Lk)("div",K,[t[15]||(t[15]=(0,e.Lk)("span",{class:"label"},"구분:",-1)),(0,e.Lk)("span",{class:(0,r.C4)(["order-type",a.order_type?a.order_type.toLowerCase():""])},(0,r.v_)("BUY"===a.order_type?"매수":"매도"),3)]),(0,e.Lk)("div",G,[t[16]||(t[16]=(0,e.Lk)("span",{class:"label"},"수량:",-1)),(0,e.Lk)("span",null,(0,r.v_)(sa.formatNumber(a.quantity))+"주",1)]),(0,e.Lk)("div",R,[t[17]||(t[17]=(0,e.Lk)("span",{class:"label"},"가격:",-1)),(0,e.Lk)("span",null,(0,r.v_)(sa.formatPrice(a.executed_price||a.order_price,a.region)),1)]),(0,e.Lk)("div",W,[t[18]||(t[18]=(0,e.Lk)("span",{class:"label"},"총액:",-1)),(0,e.Lk)("span",J,(0,r.v_)(sa.formatPrice(a.total_amount,a.region)),1)])]),(0,e.Lk)("div",Y,[(0,e.Lk)("span",Z,(0,r.v_)(sa.formatDateTime(a.executed_at||a.created_at)),1),(0,e.Lk)("span",{class:(0,r.C4)(["order-status",a.status?a.status.toLowerCase():""])},(0,r.v_)(sa.getStatusText(a.status)),3)])]))),128))]),ta.tradingHistory.length>ta.displayLimit?((0,e.uX)(),(0,e.CE)("div",j,[(0,e.Lk)("button",{onClick:t[1]||(t[1]=(...a)=>sa.showMore&&sa.showMore(...a)),class:"btn btn-outline"}," 더보기 ("+(0,r.v_)(Math.min(10,ta.tradingHistory.length-ta.displayLimit))+"건 더) ",1)])):(0,e.Q3)("",!0)])):((0,e.uX)(),(0,e.CE)("div",E,t[13]||(t[13]=[(0,e.Lk)("div",{class:"empty-icon"},"📊",-1),(0,e.Lk)("h3",null,"매매 이력이 없습니다",-1),(0,e.Lk)("p",null,"자동매매를 시작하면 매매 이력이 여기에 표시됩니다.",-1)])))])])]),t[20]||(t[20]=(0,e.Fv)('<div class="help-section" data-v-7ae95aaa><div class="card" data-v-7ae95aaa><div class="card-header" data-v-7ae95aaa><h2 class="card-title" data-v-7ae95aaa>자동매매 가이드</h2></div><div class="card-body" data-v-7ae95aaa><div class="help-grid" data-v-7ae95aaa><div class="help-item" data-v-7ae95aaa><div class="help-icon" data-v-7ae95aaa>⚙️</div><h3 class="help-title" data-v-7ae95aaa>전략 설정</h3><p class="help-description" data-v-7ae95aaa> 시장 상태와 투자 지역을 선택하고, 투자할 종목들과 각각의 투자 비율을 설정하세요. </p></div><div class="help-item" data-v-7ae95aaa><div class="help-icon" data-v-7ae95aaa>🚀</div><h3 class="help-title" data-v-7ae95aaa>매매 시작</h3><p class="help-description" data-v-7ae95aaa> 전략 설정 후 &quot;자동매매 시작&quot; 버튼을 클릭하면 설정된 조건에 따라 5분마다 자동으로 매매가 실행됩니다. </p></div><div class="help-item" data-v-7ae95aaa><div class="help-icon" data-v-7ae95aaa>📊</div><h3 class="help-title" data-v-7ae95aaa>모니터링</h3><p class="help-description" data-v-7ae95aaa> 실시간으로 매매 상태를 확인하고, 매매 이력을 통해 성과를 분석할 수 있습니다. </p></div><div class="help-item" data-v-7ae95aaa><div class="help-icon" data-v-7ae95aaa>⛔</div><h3 class="help-title" data-v-7ae95aaa>매매 중단</h3><p class="help-description" data-v-7ae95aaa> 언제든지 &quot;자동매매 종료&quot; 버튼을 클릭하여 자동매매를 안전하게 중단할 수 있습니다. </p></div></div></div></div></div>',1))])])}var ta=s(782),sa=s(5130);const ea={class:"strategy-form"},ra={class:"card"},la={class:"card-body"},ia={class:"form-group"},oa={class:"market-options"},ca={class:"market-option"},na={class:"market-option"},da={class:"form-group"},ua={class:"region-options"},va={class:"region-option"},ka={class:"region-option"},ga={key:0,class:"best-strategy"},pa={class:"strategy-header"},La={class:"strategy-performance"},ya={class:"strategy-info"},ha={class:"recommended-stocks"},ma={class:"stock-chips"},ba={class:"form-group"},fa={class:"stocks-container"},Ca={class:"stock-inputs"},Ta=["onUpdate:modelValue","placeholder","onBlur"],Sa=["onUpdate:modelValue"],_a={class:"allocation-input-group"},wa=["onUpdate:modelValue"],Aa=["onClick"],Ea={key:0,class:"form-error"},Xa={class:"allocation-summary"},Ia={key:0,class:"allocation-warning"},xa={class:"card-footer"},Va={class:"strategy-actions"},Ma={class:"trading-status"},Na={key:0,class:"status-indicator active"},Ha={key:1,class:"status-indicator inactive"},Ba={class:"action-buttons"},Da=["disabled"],Ua={key:0,class:"loading-spinner"},Fa=["disabled"],za={key:0,class:"loading-spinner"};function Pa(a,t,s,l,i,o){return(0,e.uX)(),(0,e.CE)("div",ea,[(0,e.Lk)("div",ra,[t[23]||(t[23]=(0,e.Lk)("div",{class:"card-header"},[(0,e.Lk)("h2",{class:"card-title"},"자동매매 전략 설정")],-1)),(0,e.Lk)("div",la,[(0,e.Lk)("div",ia,[t[11]||(t[11]=(0,e.Lk)("label",{class:"form-label"},"시장 상태 선택",-1)),(0,e.Lk)("div",oa,[(0,e.Lk)("label",ca,[(0,e.bo)((0,e.Lk)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>i.strategy.marketType=a),value:"bull",class:"market-radio"},null,512),[[sa.XL,i.strategy.marketType]]),t[9]||(t[9]=(0,e.Lk)("div",{class:"market-card bull"},[(0,e.Lk)("div",{class:"market-icon"},"📈"),(0,e.Lk)("div",{class:"market-label"},"상승장 전략"),(0,e.Lk)("div",{class:"market-desc"},"모멘텀 + 성장주 중심")],-1))]),(0,e.Lk)("label",na,[(0,e.bo)((0,e.Lk)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>i.strategy.marketType=a),value:"bear",class:"market-radio"},null,512),[[sa.XL,i.strategy.marketType]]),t[10]||(t[10]=(0,e.Lk)("div",{class:"market-card bear"},[(0,e.Lk)("div",{class:"market-icon"},"📉"),(0,e.Lk)("div",{class:"market-label"},"하락장 전략"),(0,e.Lk)("div",{class:"market-desc"},"가치주 + 배당주 중심")],-1))])])]),(0,e.Lk)("div",da,[t[14]||(t[14]=(0,e.Lk)("label",{class:"form-label"},"투자 지역",-1)),(0,e.Lk)("div",ua,[(0,e.Lk)("label",va,[(0,e.bo)((0,e.Lk)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=a=>i.strategy.region=a),value:"domestic",class:"region-radio"},null,512),[[sa.XL,i.strategy.region]]),t[12]||(t[12]=(0,e.Lk)("div",{class:"region-card"},[(0,e.Lk)("span",{class:"region-flag"},"🇰🇷"),(0,e.Lk)("span",{class:"region-text"},"국내 투자")],-1))]),(0,e.Lk)("label",ka,[(0,e.bo)((0,e.Lk)("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=a=>i.strategy.region=a),value:"global",class:"region-radio"},null,512),[[sa.XL,i.strategy.region]]),t[13]||(t[13]=(0,e.Lk)("div",{class:"region-card"},[(0,e.Lk)("span",{class:"region-flag"},"🌍"),(0,e.Lk)("span",{class:"region-text"},"해외 투자")],-1))])])]),a.bestStrategy?((0,e.uX)(),(0,e.CE)("div",ga,[(0,e.Lk)("div",pa,[t[15]||(t[15]=(0,e.Lk)("span",{class:"strategy-badge"},"AI 추천 전략",-1)),(0,e.Lk)("span",La," 예상 수익률: "+(0,r.v_)(a.bestStrategy.expectedReturn)+"% ",1)]),(0,e.Lk)("div",ya,[(0,e.Lk)("p",null,[(0,e.Lk)("strong",null,(0,r.v_)(a.bestStrategy.name),1)]),(0,e.Lk)("p",null,(0,r.v_)(a.bestStrategy.description),1),(0,e.Lk)("div",ha,[t[16]||(t[16]=(0,e.Lk)("h4",null,"추천 종목 구성",-1)),(0,e.Lk)("div",ma,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.bestStrategy.stocks,a=>((0,e.uX)(),(0,e.CE)("span",{key:a.code,class:"stock-chip"},(0,r.v_)(a.name)+" ("+(0,r.v_)(a.allocation)+"%) ",1))),128))])])]),(0,e.Lk)("button",{onClick:t[4]||(t[4]=(...a)=>o.applyBestStrategy&&o.applyBestStrategy(...a)),class:"btn btn-sm btn-outline"}," 이 전략 적용 ")])):(0,e.Q3)("",!0),(0,e.Lk)("div",ba,[t[18]||(t[18]=(0,e.Lk)("label",{class:"form-label"},"종목 구성",-1)),(0,e.Lk)("div",fa,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(i.strategy.stocks,(a,s)=>((0,e.uX)(),(0,e.CE)("div",{key:s,class:"stock-item"},[(0,e.Lk)("div",Ca,[(0,e.bo)((0,e.Lk)("input",{type:"text","onUpdate:modelValue":t=>a.code=t,placeholder:"domestic"===i.strategy.region?"종목코드 (예: 005930)":"티커 (예: AAPL)",class:"form-input stock-code",onBlur:a=>o.validateStockCode(s)},null,40,Ta),[[sa.Jo,a.code]]),(0,e.bo)((0,e.Lk)("input",{type:"text","onUpdate:modelValue":t=>a.name=t,placeholder:"종목명",class:"form-input stock-name",readonly:""},null,8,Sa),[[sa.Jo,a.name]]),(0,e.Lk)("div",_a,[(0,e.bo)((0,e.Lk)("input",{type:"number","onUpdate:modelValue":t=>a.allocation=t,min:"1",max:"100",placeholder:"비율",class:"form-input allocation-input",onInput:t[5]||(t[5]=(...a)=>o.updateTotalAllocation&&o.updateTotalAllocation(...a))},null,40,wa),[[sa.Jo,a.allocation]]),t[17]||(t[17]=(0,e.Lk)("span",{class:"allocation-unit"},"%",-1))]),i.strategy.stocks.length>1?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:a=>o.removeStock(s),class:"btn-remove",type:"button"}," × ",8,Aa)):(0,e.Q3)("",!0)]),a.error?((0,e.uX)(),(0,e.CE)("div",Ea,(0,r.v_)(a.error),1)):(0,e.Q3)("",!0)]))),128)),(0,e.Lk)("button",{onClick:t[6]||(t[6]=(...a)=>o.addStock&&o.addStock(...a)),class:"btn btn-outline btn-sm add-stock-btn",type:"button"}," + 종목 추가 "),(0,e.Lk)("div",Xa,[(0,e.Lk)("span",{class:(0,r.C4)(["total-allocation",{invalid:100!==i.totalAllocation}])}," 총 투자 비율: "+(0,r.v_)(i.totalAllocation)+"% ",3),100!==i.totalAllocation?((0,e.uX)(),(0,e.CE)("span",Ia," (총 100%가 되어야 합니다) ")):(0,e.Q3)("",!0)])])])]),(0,e.Lk)("div",xa,[(0,e.Lk)("div",Va,[(0,e.Lk)("div",Ma,[a.isTrading?((0,e.uX)(),(0,e.CE)("span",Na,t[19]||(t[19]=[(0,e.Lk)("span",{class:"status-dot"},null,-1),(0,e.eW)(" 자동매매 실행 중 ",-1)]))):((0,e.uX)(),(0,e.CE)("span",Ha,t[20]||(t[20]=[(0,e.Lk)("span",{class:"status-dot"},null,-1),(0,e.eW)(" 자동매매 대기 중 ",-1)])))]),(0,e.Lk)("div",Ba,[a.isTrading?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:t[7]||(t[7]=(...a)=>o.startTrading&&o.startTrading(...a)),disabled:!o.isValidStrategy||o.loading,class:"btn btn-success"},[o.loading?((0,e.uX)(),(0,e.CE)("span",Ua)):(0,e.Q3)("",!0),t[21]||(t[21]=(0,e.eW)(" 자동매매 시작 ",-1))],8,Da)),a.isTrading?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:t[8]||(t[8]=(...a)=>o.stopTrading&&o.stopTrading(...a)),disabled:o.loading,class:"btn btn-danger"},[o.loading?((0,e.uX)(),(0,e.CE)("span",za)):(0,e.Q3)("",!0),t[22]||(t[22]=(0,e.eW)(" 자동매매 종료 ",-1))],8,Fa)):(0,e.Q3)("",!0)])])])])])}s(4114),s(8111),s(1148),s(1701),s(8237),s(3579);var $a={name:"TradingStrategy",data(){return{strategy:{marketType:"bull",region:"domestic",stocks:[{code:"",name:"",allocation:100,error:null}]},totalAllocation:100}},computed:{...(0,ta.L8)("trading",["bestStrategy","isTrading","isLoading","currentStrategy"]),loading(){return this.isLoading},isValidStrategy(){return this.strategy.marketType&&this.strategy.region&&this.strategy.stocks.every(a=>a.code&&a.allocation>0)&&100===this.totalAllocation&&!this.strategy.stocks.some(a=>a.error)}},async created(){await this.loadBestStrategy(),await this.loadTradingStatus(),this.currentStrategy&&this.loadCurrentStrategy()},methods:{...(0,ta.i0)("trading",["loadBestStrategy","loadTradingStatus","createStrategy","startTrading as startTradingAction","stopTrading as stopTradingAction"]),loadCurrentStrategy(){this.currentStrategy&&(this.strategy={marketType:this.currentStrategy.marketType,region:this.currentStrategy.region,stocks:this.currentStrategy.stocks||[{code:"",name:"",allocation:100,error:null}]},this.updateTotalAllocation())},applyBestStrategy(){this.bestStrategy&&(this.strategy={marketType:this.bestStrategy.marketType,region:this.bestStrategy.region,stocks:this.bestStrategy.stocks.map(a=>({code:a.code,name:a.name,allocation:a.allocation,error:null}))},this.updateTotalAllocation())},addStock(){this.strategy.stocks.length<10&&this.strategy.stocks.push({code:"",name:"",allocation:0,error:null})},removeStock(a){this.strategy.stocks.splice(a,1),this.updateTotalAllocation()},updateTotalAllocation(){this.totalAllocation=this.strategy.stocks.reduce((a,t)=>a+(parseInt(t.allocation)||0),0)},async validateStockCode(a){const t=this.strategy.stocks[a];if(!t.code)return t.error=null,void(t.name="");try{if("domestic"===this.strategy.region){if(!/^\d{6}$/.test(t.code))return t.error="올바른 종목 코드를 입력해주세요 (6자리 숫자)",void(t.name="");const a={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","006400":"삼성SDI","035720":"카카오",207940:"삼성바이오로직스",373220:"LG에너지솔루션","000270":"기아","068270":"셀트리온"};t.name=a[t.code]||"알 수 없는 종목",t.error=null}else{if(!/^[A-Z]{1,5}$/.test(t.code.toUpperCase()))return t.error="올바른 티커를 입력해주세요",void(t.name="");const a={AAPL:"Apple Inc.",MSFT:"Microsoft Corp.",GOOGL:"Alphabet Inc.",AMZN:"Amazon.com Inc.",TSLA:"Tesla Inc.",META:"Meta Platforms Inc.",NVDA:"NVIDIA Corp.",NFLX:"Netflix Inc."};t.code=t.code.toUpperCase(),t.name=a[t.code]||"알 수 없는 종목",t.error=null}}catch(s){t.error="종목 정보를 가져올 수 없습니다",t.name=""}},async startTrading(){try{const a=await this.createStrategy(this.strategy);if(a){const a=this.currentStrategy;a&&await this.startTradingAction(a.id)}}catch(a){console.error("자동매매 시작 오류:",a)}},async stopTrading(){try{await this.stopTradingAction()}catch(a){console.error("자동매매 중단 오류:",a)}}}},Qa=s(1241);const Oa=(0,Qa.A)($a,[["render",Pa],["__scopeId","data-v-13662dfe"]]);var qa=Oa,Ka=s(653),Ga={name:"TradingPage",components:{TradingStrategy:qa},data(){return{tradingHistory:[],historyLoading:!1,displayLimit:10}},computed:{...(0,ta.L8)("trading",["isTrading","currentStrategy","isLoading"]),hasOrders(){return this.tradingHistory.length>0},displayedOrders(){return this.tradingHistory.slice(0,this.displayLimit)}},async created(){try{await this.loadTradingStatus(),await this.loadTradingHistory()}catch(a){console.error("페이지 초기화 오류:",a)}},methods:{...(0,ta.i0)("trading",["loadTradingStatus"]),async loadTradingHistory(){this.historyLoading=!0;try{const a=await Ka.A.get("/trading/history");a.data.success&&(this.tradingHistory=a.data.data||[])}catch(a){console.error("매매 이력 로드 실패:",a),this.tradingHistory=[],this.$toast?this.$toast.error("매매 이력을 불러오는데 실패했습니다."):console.warn("매매 이력을 불러오는데 실패했습니다.")}finally{this.historyLoading=!1}},async refreshHistory(){await this.loadTradingHistory(),this.$toast&&this.$toast.success("매매 이력이 새로고침되었습니다.")},showMore(){this.displayLimit+=10},formatDateTime(a){if(!a)return"-";try{const t=new Date(a);if(isNaN(t.getTime()))return"-";const s=new Date,e=s-t,r=Math.floor(e/6e4),l=Math.floor(r/60),i=Math.floor(l/24);return r<1?"방금 전":r<60?`${r}분 전`:l<24?`${l}시간 전`:i<7?`${i}일 전`:t.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("날짜 포맷 오류:",t),a}},formatPrice(a,t){if(!a||null===a||void 0===a)return"-";try{const s="string"===typeof a?parseFloat(a):a;return isNaN(s)?"-":"domestic"===t?s.toLocaleString()+"원":"$"+s.toFixed(2)}catch(s){return console.error("가격 포맷 오류:",s),"-"}},formatNumber(a){if(!a||null===a||void 0===a)return"0";try{const t="string"===typeof a?parseInt(a):a;return isNaN(t)?"0":t.toLocaleString()}catch(t){return console.error("숫자 포맷 오류:",t),"0"}},getStatusText(a){if(!a)return"알 수 없음";const t={PENDING:"대기",FILLED:"체결",PARTIALLY_FILLED:"부분체결",CANCELLED:"취소",REJECTED:"거부"};return t[a]||a}}};const Ra=(0,Qa.A)(Ga,[["render",aa],["__scopeId","data-v-7ae95aaa"]]);var Wa=Ra}}]);
//# sourceMappingURL=146.4a895946.js.map