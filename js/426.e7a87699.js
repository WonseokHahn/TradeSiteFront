"use strict";(self["webpackChunktrade_frontend"]=self["webpackChunktrade_frontend"]||[]).push([[426],{9426:function(e,o,t){t.r(o),t.d(o,{default:function(){return m}});var r=t(6768),s=t(4232);const n={class:"auth-callback"},a={class:"callback-container"},l={class:"callback-content"},c={class:"callback-title"},i={class:"callback-message"},u={key:0,class:"debug-info"};function h(e,o,t,h,d,g){return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",a,[(0,r.Lk)("div",l,[o[1]||(o[1]=(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1)),(0,r.Lk)("h2",c,(0,s.v_)(d.title),1),(0,r.Lk)("p",i,(0,s.v_)(d.message),1),d.showDebug?((0,r.uX)(),(0,r.CE)("div",u,[o[0]||(o[0]=(0,r.Lk)("h4",null,"ë””ë²„ê·¸ ì •ë³´:",-1)),(0,r.Lk)("pre",null,(0,s.v_)(d.debugInfo),1)])):(0,r.Q3)("",!0)])])])}t(4603),t(7566),t(8721);var d=t(782),g={name:"AuthCallback",data(){return{title:"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘...",message:"ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",showDebug:!1,debugInfo:{}}},async mounted(){console.log("ðŸŽ¬ AuthCallback ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨"),console.log("ðŸŒ í˜„ìž¬ URL:",window.location.href),console.log("ðŸ“ ë¼ìš°íŠ¸ ì •ë³´:",this.$route),await this.handleAuthCallback()},methods:{...(0,d.i0)("auth",["loginWithToken"]),async handleAuthCallback(){try{console.log("ðŸ”„ OAuth ì½œë°± ì²˜ë¦¬ ì‹œìž‘");const e=new URLSearchParams(window.location.search),o=e.get("token")||this.$route.query.token,t=e.get("provider")||this.$route.query.provider,r=e.get("name")||this.$route.query.name,s=e.get("error")||this.$route.query.error;if(this.debugInfo={url:window.location.href,queryParams:this.$route.query,urlParams:Object.fromEntries(e),token:o?o.substring(0,20)+"...":"null",provider:t,name:r?decodeURIComponent(r):"null",error:s},console.log("ðŸ” ì¶”ì¶œëœ íŒŒë¼ë¯¸í„°:",this.debugInfo),s)throw new Error(`OAuth ì˜¤ë¥˜: ${s}`);if(!o)throw this.showDebug=!0,new Error("í† í°ì´ ì—†ìŠµë‹ˆë‹¤. URL íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");console.log("ðŸŽ« í† í° ë°œê²¬:",o.substring(0,30)+"..."),console.log("ðŸ” OAuth ì œê³µìž:",t),console.log("ðŸ‘¤ ì‚¬ìš©ìž ì´ë¦„:",decodeURIComponent(r||"")),this.message="í† í°ì„ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...";const n=await this.loginWithToken(o);if(!n)throw new Error("í† í° ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ! í™ˆìœ¼ë¡œ ì´ë™"),this.title="ë¡œê·¸ì¸ ì™„ë£Œ!",this.message="í™ˆíŽ˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...",setTimeout(()=>{this.$router.replace("/")},2e3)}catch(e){console.error("âŒ Auth callback ì˜¤ë¥˜:",e),this.title="ë¡œê·¸ì¸ ì˜¤ë¥˜",this.message=`ì˜¤ë¥˜: ${e.message}`,this.showDebug=!0,setTimeout(()=>{this.$router.replace({name:"Login",query:{error:"callback_failed"}})},5e3)}}}},k=t(1241);const b=(0,k.A)(g,[["render",h],["__scopeId","data-v-fc767e92"]]);var m=b}}]);
//# sourceMappingURL=426.e7a87699.js.map