(function(){"use strict";var a={6829:function(a,t,s){var e=s(5130),r=s(6768);const o={id:"app"},i={class:"main-content"};function l(a,t,s,e,l,n){const c=(0,r.g2)("Header"),d=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(c),(0,r.Lk)("main",i,[(0,r.bF)(d)])])}var n=s(4232);const c={class:"header"},d={class:"container"},u={class:"header-content"},g={class:"header-logo"},h={class:"header-nav"},k={class:"header-user"},v={key:0,class:"user-menu"},p={class:"dropdown"},m=["src","alt"],L={key:1,class:"user-avatar-placeholder"},f={class:"user-name"},y={key:0,class:"dropdown-menu"},b={key:1,class:"auth-buttons"};function S(a,t,s,e,o,i){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("header",c,[(0,r.Lk)("div",d,[(0,r.Lk)("div",u,[(0,r.Lk)("div",g,[(0,r.bF)(l,{to:"/",class:"logo-link"},{default:(0,r.k6)(()=>t[2]||(t[2]=[(0,r.Lk)("h1",{class:"logo-text"},"자유놀이터",-1)])),_:1,__:[2]})]),(0,r.Lk)("nav",h,[(0,r.bF)(l,{to:"/",class:"nav-link"},{default:(0,r.k6)(()=>t[3]||(t[3]=[(0,r.eW)("홈",-1)])),_:1,__:[3]}),a.isAuthenticated?((0,r.uX)(),(0,r.Wv)(l,{key:0,to:"/trading",class:"nav-link"},{default:(0,r.k6)(()=>t[4]||(t[4]=[(0,r.eW)(" 자동매매 ",-1)])),_:1,__:[4]})):(0,r.Q3)("",!0)]),(0,r.Lk)("div",k,[a.isAuthenticated?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",p,[(0,r.Lk)("button",{class:"dropdown-toggle user-toggle",onClick:t[0]||(t[0]=(...a)=>i.toggleUserMenu&&i.toggleUserMenu(...a))},[a.userAvatar?((0,r.uX)(),(0,r.CE)("img",{key:0,src:a.userAvatar,alt:a.userName,class:"user-avatar"},null,8,m)):((0,r.uX)(),(0,r.CE)("div",L,(0,n.v_)(a.userName.charAt(0).toUpperCase()),1)),(0,r.Lk)("span",f,(0,n.v_)(a.userName),1),t[5]||(t[5]=(0,r.Lk)("svg",{class:"dropdown-arrow",width:"12",height:"12",viewBox:"0 0 12 12"},[(0,r.Lk)("path",{d:"M6 8L2 4h8L6 8z",fill:"currentColor"})],-1))]),o.showUserMenu?((0,r.uX)(),(0,r.CE)("div",y,[(0,r.bF)(l,{to:"/trading",class:"dropdown-item"},{default:(0,r.k6)(()=>t[6]||(t[6]=[(0,r.eW)(" 자동매매 관리 ",-1)])),_:1,__:[6]}),t[7]||(t[7]=(0,r.Lk)("div",{class:"dropdown-divider"},null,-1)),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...a)=>i.handleLogout&&i.handleLogout(...a)),class:"dropdown-item"}," 로그아웃 ")])):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.CE)("div",b,[(0,r.bF)(l,{to:"/login",class:"custom-login-button"},{default:(0,r.k6)(()=>t[8]||(t[8]=[(0,r.eW)(" 로그인 ",-1)])),_:1,__:[8]})]))])])])])}s(4114);var _=s(782),T={name:"HeaderView",data(){return{showUserMenu:!1}},computed:{...(0,_.L8)("auth",["isAuthenticated","userName","userAvatar"])},methods:{...(0,_.i0)("auth",["logout"]),toggleUserMenu(){this.showUserMenu=!this.showUserMenu},async handleLogout(){this.showUserMenu=!1,await this.logout(),this.$router.push("/")},handleClickOutside(a){this.$el.contains(a.target)||(this.showUserMenu=!1)}},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},w=s(1241);const C=(0,w.A)(T,[["render",S],["__scopeId","data-v-457bcd26"]]);var E=C,A={name:"App",components:{Header:E},async created(){const a=localStorage.getItem("token");a&&await this.loadUserProfile()},methods:{...(0,_.i0)("auth",["loadUserProfile"])}};const I=(0,w.A)(A,[["render",l]]);var R=I,O=s(1387),X=s(4373);const N="https://tradesiteback.onrender.com/api",$=X.A.create({baseURL:N,timeout:3e4,headers:{"Content-Type":"application/json"}});$.interceptors.request.use(a=>{const t=localStorage.getItem("token");return t&&(a.headers["Authorization"]=`Bearer ${t}`),console.log(`🔍 API 요청: ${a.method?.toUpperCase()} ${a.url}`),a},a=>(console.error("❌ API 요청 에러:",a),Promise.reject(a))),$.interceptors.response.use(a=>(console.log(`✅ API 응답: ${a.status} ${a.config.url}`),a),a=>(console.error("❌ API 응답 에러:",a),401===a.response?.status&&(console.log("🔑 토큰 만료 - 로그아웃 처리"),localStorage.removeItem("token"),"/login"!==window.location.pathname&&(window.location.href="/login")),Promise.reject(a)));var M=$,D=s(7411);const x={user:null,token:localStorage.getItem("token")||null,isAuthenticated:!1},U={SET_USER(a,t){a.user=t,a.isAuthenticated=!!t},SET_TOKEN(a,t){a.token=t,t?localStorage.setItem("token",t):localStorage.removeItem("token")},LOGOUT(a){a.user=null,a.token=null,a.isAuthenticated=!1,localStorage.removeItem("token")}},G={async loadUserProfile({commit:a,state:t}){try{if(!t.token)return;console.log("👤 사용자 프로필 로딩 중...");const s=await M.get("/auth/profile");s.data.success?(a("SET_USER",s.data.user),console.log("✅ 사용자 프로필 로드 성공:",s.data.user.email)):(console.log("⚠️ 유효하지 않은 토큰 - 로그아웃 처리"),a("LOGOUT"))}catch(s){console.error("❌ 프로필 로드 실패:",s),a("LOGOUT")}},async loginWithToken({commit:a,dispatch:t},s){try{console.log("🔑 토큰으로 로그인 처리 중..."),a("SET_TOKEN",s),await t("loadUserProfile");const e=(0,D.dj)();return e.success("로그인되었습니다!"),!0}catch(e){console.error("❌ 토큰 로그인 실패:",e),a("LOGOUT");const t=(0,D.dj)();return t.error("로그인에 실패했습니다."),!1}},async logout({commit:a}){try{console.log("👋 로그아웃 처리 중..."),await M.post("/auth/logout")}catch(t){console.error("❌ 로그아웃 API 호출 실패:",t)}finally{a("LOGOUT");const t=(0,D.dj)();t.success("로그아웃되었습니다.")}},getGoogleLoginUrl(){const a="https://tradesiteback.onrender.com/api"?.replace("/api","")||0;return`${a}/api/auth/google`},getKakaoLoginUrl(){const a="https://tradesiteback.onrender.com/api"?.replace("/api","")||0;return`${a}/api/auth/kakao`}},P={isAuthenticated:a=>a.isAuthenticated,user:a=>a.user,token:a=>a.token,userName:a=>a.user?.name||"",userAvatar:a=>a.user?.avatar||""};var B={namespaced:!0,state:x,mutations:U,actions:G,getters:P};const K={articles:[],loading:!1,searchKeyword:""},F={SET_ARTICLES(a,t){a.articles=t},SET_LOADING(a,t){a.loading=t},SET_SEARCH_KEYWORD(a,t){a.searchKeyword=t},CLEAR_ARTICLES(a){a.articles=[],a.searchKeyword=""}},W={async searchNews({commit:a},t){if(!t||""===t.trim()){const a=(0,D.dj)();return void a.warning("검색 키워드를 입력해주세요.")}a("SET_LOADING",!0),a("SET_SEARCH_KEYWORD",t);try{const s=await M.get("/news/search",{params:{keyword:t.trim()}});if(!s.data.success)throw new Error(s.data.message||"뉴스 검색에 실패했습니다.");if(a("SET_ARTICLES",s.data.data),0===s.data.data.length){const a=(0,D.dj)();a.info("검색 결과가 없습니다.")}}catch(s){console.error("뉴스 검색 오류:",s),a("SET_ARTICLES",[]);const t=(0,D.dj)();t.error(s.response?.data?.message||"뉴스 검색 중 오류가 발생했습니다.")}finally{a("SET_LOADING",!1)}},clearNews({commit:a}){a("CLEAR_ARTICLES")}},H={articles:a=>a.articles,isLoading:a=>a.loading,searchKeyword:a=>a.searchKeyword,hasArticles:a=>a.articles.length>0};var Q={namespaced:!0,state:K,mutations:F,actions:W,getters:H};const j={strategies:[],bestStrategy:null,currentStrategy:null,isTrading:!1,loading:!1},q={SET_STRATEGIES(a,t){a.strategies=t},SET_BEST_STRATEGY(a,t){a.bestStrategy=t},SET_CURRENT_STRATEGY(a,t){a.currentStrategy=t},SET_TRADING_STATUS(a,t){console.log("🔄 SET_TRADING_STATUS 호출:",t),a.isTrading=t.isActive,a.currentStrategy=t.strategy},SET_LOADING(a,t){a.loading=t},ADD_STRATEGY(a,t){a.strategies.unshift(t)},SET_IS_TRADING(a,t){console.log("🔄 SET_IS_TRADING 호출:",t),a.isTrading=t}},z={async loadStrategies({commit:a}){a("SET_LOADING",!0);try{const t=await M.get("/trading/strategies");t.data.success&&a("SET_STRATEGIES",t.data.data)}catch(t){console.error("전략 로드 실패:",t);const a=(0,D.dj)();a.error("전략을 불러오는데 실패했습니다.")}finally{a("SET_LOADING",!1)}},async loadBestStrategy({commit:a}){try{const t=await M.get("/trading/strategies/best");t.data.success&&a("SET_BEST_STRATEGY",t.data.data)}catch(t){console.error("최적 전략 로드 실패:",t)}},async loadTradingStatus({commit:a}){try{console.log("🔍 loadTradingStatus 호출");const t=await M.get("/trading/status");t.data.success&&(console.log("📊 받은 trading status:",t.data.data),a("SET_TRADING_STATUS",t.data.data))}catch(t){console.error("트레이딩 상태 로드 실패:",t)}},async createStrategy({commit:a},t){a("SET_LOADING",!0);try{console.log("전략 생성 데이터:",t);const s=await M.post("/trading/strategies",t);if(s.data.success){a("ADD_STRATEGY",s.data.data),a("SET_CURRENT_STRATEGY",s.data.data);const t=(0,D.dj)();return t.success("전략이 생성되었습니다."),!0}}catch(s){console.error("전략 생성 실패:",s);const a=(0,D.dj)();return a.error(s.response?.data?.message||"전략 생성에 실패했습니다."),!1}finally{a("SET_LOADING",!1)}},async startTrading({commit:a,dispatch:t},s){a("SET_LOADING",!0);try{if(console.log("🚀 Vuex startTrading 액션 시작"),console.log("📊 전달받은 strategyId:",s,"타입:",typeof s),!s)throw console.error("❌ strategyId가 없음"),new Error("전략 ID가 필요합니다.");const e=parseInt(s);if(isNaN(e))throw console.error("❌ strategyId를 숫자로 변환 불가:",s),new Error("유효하지 않은 전략 ID입니다.");console.log("✅ 변환된 strategyId:",e);const r={strategyId:e};console.log("📤 서버로 전송할 데이터:",JSON.stringify(r,null,2));const o=await M.post("/trading/start",r);if(console.log("📨 서버 응답 상태:",o.status),console.log("📨 서버 응답 데이터:",JSON.stringify(o.data,null,2)),o.data.success){console.log("✅ 서버 응답: 자동매매 시작 성공"),a("SET_IS_TRADING",!0),o.data.data&&o.data.data.strategy&&a("SET_CURRENT_STRATEGY",o.data.data.strategy),await t("loadTradingStatus");const s=(0,D.dj)();return s.success("자동매매가 시작되었습니다."),!0}return console.error("❌ 서버 응답: 자동매매 시작 실패"),console.error("❌ 실패 이유:",o.data.message),!1}catch(e){console.error("❌ 자동매매 시작 네트워크 오류:",e),e.response?(console.error("❌ 응답 상태:",e.response.status),console.error("❌ 응답 데이터:",e.response.data),console.error("❌ 응답 헤더:",e.response.headers)):e.request?console.error("❌ 요청 정보:",e.request):console.error("❌ 오류 메시지:",e.message);const a=(0,D.dj)();return e.response&&e.response.data&&e.response.data.message?a.error(e.response.data.message):a.error("자동매매 시작에 실패했습니다."),!1}finally{a("SET_LOADING",!1)}},async stopTrading({commit:a,dispatch:t}){a("SET_LOADING",!0);try{console.log("⏹️ 자동매매 중단 요청");const s=await M.post("/trading/stop");if(s.data.success){a("SET_IS_TRADING",!1),await t("loadTradingStatus");const s=(0,D.dj)();return s.success("자동매매가 중단되었습니다."),!0}}catch(s){console.error("자동매매 중단 실패:",s);const a=(0,D.dj)();return a.error(s.response?.data?.message||"자동매매 중단에 실패했습니다."),!1}finally{a("SET_LOADING",!1)}}},V={strategies:a=>a.strategies,bestStrategy:a=>a.bestStrategy,currentStrategy:a=>a.currentStrategy,isTrading:a=>(console.log("🔍 getters.isTrading 호출됨:",a.isTrading),a.isTrading),isLoading:a=>a.loading,hasStrategies:a=>a.strategies.length>0};var Y={namespaced:!0,state:j,mutations:q,actions:z,getters:V},J=(0,_.y$)({modules:{auth:B,news:Q,trading:Y},state:{loading:!1,error:null},mutations:{SET_LOADING(a,t){a.loading=t},SET_ERROR(a,t){a.error=t},CLEAR_ERROR(a){a.error=null}},actions:{setLoading({commit:a},t){a("SET_LOADING",t)},setError({commit:a},t){a("SET_ERROR",t)},clearError({commit:a}){a("CLEAR_ERROR")}},getters:{isLoading:a=>a.loading,hasError:a=>!!a.error,error:a=>a.error}});const Z={class:"home"},aa={class:"hero"},ta={class:"container"},sa={class:"hero-content"},ea={class:"search-section"},ra={class:"search-container"},oa={class:"search-input-group"},ia=["disabled"],la={key:0,class:"loading-spinner"},na={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},ca={class:"search-suggestions"},da=["onClick"],ua={key:0,class:"news-results"},ga={class:"container"},ha={class:"results-header"},ka={class:"results-title"},va={key:0},pa={key:1},ma={class:"results-meta"},La={key:0,class:"results-count"},fa={key:0,class:"loading-state"},ya={key:1,class:"no-results"},ba={key:2,class:"news-grid"},Sa={key:1,class:"features"},_a={key:2,class:"cta"};function Ta(a,t,s,o,i,l){const c=(0,r.g2)("NewsCard");return(0,r.uX)(),(0,r.CE)("div",Z,[(0,r.Lk)("section",aa,[(0,r.Lk)("div",ta,[(0,r.Lk)("div",sa,[t[7]||(t[7]=(0,r.Lk)("h1",{class:"hero-title"}," AI 기반 놀이터 ",-1)),t[8]||(t[8]=(0,r.Lk)("p",{class:"hero-subtitle"}," 실시간 뉴스 분석과 AI 요약 주식 자동화 ",-1)),(0,r.Lk)("div",ea,[(0,r.Lk)("div",ra,[(0,r.Lk)("div",oa,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>i.searchKeyword=a),onKeypress:t[1]||(t[1]=(0,e.jR)((...a)=>l.handleSearch&&l.handleSearch(...a),["enter"])),placeholder:"종목명 또는 키워드를 입력하세요 (예: 삼성전자, AI, 전기차)",class:"search-input"},null,544),[[e.Jo,i.searchKeyword]]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...a)=>l.handleSearch&&l.handleSearch(...a)),disabled:l.isSearching||!i.searchKeyword.trim(),class:"search-button"},[l.isSearching?((0,r.uX)(),(0,r.CE)("span",la)):((0,r.uX)(),(0,r.CE)("svg",na,t[4]||(t[4]=[(0,r.Lk)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},null,-1)]))),t[5]||(t[5]=(0,r.eW)(" 검색 ",-1))],8,ia)]),(0,r.Lk)("div",ca,[t[6]||(t[6]=(0,r.Lk)("span",{class:"suggestion-label"},"인기 검색어:",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.popularKeywords,a=>((0,r.uX)(),(0,r.CE)("button",{key:a,onClick:t=>l.searchByKeyword(a),class:"suggestion-tag"},(0,n.v_)(a),9,da))),128))])])])])])]),i.hasSearched?((0,r.uX)(),(0,r.CE)("section",ua,[(0,r.Lk)("div",ga,[(0,r.Lk)("div",ha,[(0,r.Lk)("h2",ka,[i.searchKeyword?((0,r.uX)(),(0,r.CE)("span",va,'"'+(0,n.v_)(i.searchKeyword)+'" 검색 결과',1)):((0,r.uX)(),(0,r.CE)("span",pa,"뉴스 검색 결과"))]),(0,r.Lk)("div",ma,[!l.isSearching&&a.hasArticles?((0,r.uX)(),(0,r.CE)("span",La," 총 "+(0,n.v_)(a.articles.length)+"개의 기사 ",1)):(0,r.Q3)("",!0),a.hasArticles?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[3]||(t[3]=(...a)=>l.clearResults&&l.clearResults(...a)),class:"btn btn-sm btn-outline"}," 검색 초기화 ")):(0,r.Q3)("",!0)])]),l.isSearching?((0,r.uX)(),(0,r.CE)("div",fa,t[9]||(t[9]=[(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1),(0,r.Lk)("p",null,"뉴스를 검색하고 AI 요약을 생성하는 중...",-1)]))):!a.hasArticles&&i.hasSearched?((0,r.uX)(),(0,r.CE)("div",ya,t[10]||(t[10]=[(0,r.Lk)("div",{class:"no-results-icon"},"📰",-1),(0,r.Lk)("h3",null,"검색 결과가 없습니다",-1),(0,r.Lk)("p",null,"다른 키워드로 검색해보세요",-1)]))):a.hasArticles?((0,r.uX)(),(0,r.CE)("div",ba,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.articles,(a,t)=>((0,r.uX)(),(0,r.Wv)(c,{key:t,article:a},null,8,["article"]))),128))])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),i.hasSearched?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("section",Sa,t[11]||(t[11]=[(0,r.Fv)('<div class="container" data-v-89f452d6><h2 class="section-title" data-v-89f452d6>주요 기능</h2><div class="features-grid" data-v-89f452d6><div class="feature-card" data-v-89f452d6><div class="feature-icon" data-v-89f452d6>🔍</div><h3 class="feature-title" data-v-89f452d6>실시간 뉴스 검색</h3><p class="feature-description" data-v-89f452d6> 네이버 뉴스에서 실시간으로 관련 뉴스를 검색하고 최신 정보를 제공합니다. </p></div><div class="feature-card" data-v-89f452d6><div class="feature-icon" data-v-89f452d6>🤖</div><h3 class="feature-title" data-v-89f452d6>AI 뉴스 요약</h3><p class="feature-description" data-v-89f452d6> GPT를 활용하여 복잡한 뉴스 내용을 간결하고 이해하기 쉽게 요약합니다. </p></div><div class="feature-card" data-v-89f452d6><div class="feature-icon" data-v-89f452d6>📈</div><h3 class="feature-title" data-v-89f452d6>자동매매 시스템</h3><p class="feature-description" data-v-89f452d6> 로그인 후 AI 기반 자동매매 전략을 설정하고 실행할 수 있습니다. </p></div></div></div>',1)]))),a.isAuthenticated||i.hasSearched?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("section",_a,t[12]||(t[12]=[(0,r.Lk)("div",{class:"container"},[(0,r.Lk)("div",{class:"cta-content"},[(0,r.Lk)("h2",{class:"cta-title"},"지금 시작하세요"),(0,r.Lk)("p",{class:"cta-description"}," 로그인하고 AI 기반 자동매매 서비스를 이용해보세요 ")])],-1)])))])}const wa={class:"news-card"},Ca={class:"news-header"},Ea={class:"news-title"},Aa=["href"],Ia={class:"news-meta"},Ra={class:"news-source"},Oa={class:"news-date"},Xa={class:"news-body"},Na={class:"news-description"},$a={class:"news-summary"},Ma={class:"summary-text"};function Da(a,t,s,e,o,i){return(0,r.uX)(),(0,r.CE)("div",wa,[(0,r.Lk)("div",Ca,[(0,r.Lk)("h3",Ea,[(0,r.Lk)("a",{href:s.article.link,target:"_blank",rel:"noopener noreferrer",class:"news-link"},(0,n.v_)(s.article.title),9,Aa)]),(0,r.Lk)("div",Ia,[(0,r.Lk)("span",Ra,(0,n.v_)(s.article.source),1),(0,r.Lk)("span",Oa,(0,n.v_)(i.formatDate(s.article.publishedAt)),1)])]),(0,r.Lk)("div",Xa,[(0,r.Lk)("p",Na,(0,n.v_)(s.article.description),1),(0,r.Lk)("div",$a,[t[0]||(t[0]=(0,r.Lk)("div",{class:"summary-header"},[(0,r.Lk)("span",{class:"summary-label"},[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]),(0,r.eW)(" AI 요약 ")])],-1)),(0,r.Lk)("p",Ma,(0,n.v_)(s.article.summary),1)])])])}var xa={name:"NewsCard",props:{article:{type:Object,required:!0}},data(){return{isExpanded:!1}},methods:{toggleExpanded(){this.isExpanded=!this.isExpanded},formatDate(a){if(!a)return"";try{const t=new Date(a),s=new Date,e=s-t,r=Math.floor(e/6e4),o=Math.floor(r/60),i=Math.floor(o/24);return r<1?"방금 전":r<60?`${r}분 전`:o<24?`${o}시간 전`:i<7?`${i}일 전`:t.toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"})}catch(t){return a}}}};const Ua=(0,w.A)(xa,[["render",Da],["__scopeId","data-v-50d9ccd5"]]);var Ga=Ua,Pa={name:"HomePage",components:{NewsCard:Ga},data(){return{searchKeyword:"",hasSearched:!1,popularKeywords:["삼성전자","양자컴퓨터","전기차","반도체","트럼프","테슬라","비트코인"]}},computed:{...(0,_.L8)("auth",["isAuthenticated"]),...(0,_.L8)("news",["articles","isLoading","hasArticles"]),isSearching(){return this.isLoading}},methods:{...(0,_.i0)("news",["searchNews","clearNews"]),async handleSearch(){this.searchKeyword.trim()&&(this.hasSearched=!0,await this.searchNews(this.searchKeyword.trim()))},async searchByKeyword(a){this.searchKeyword=a,await this.handleSearch()},clearResults(){this.hasSearched=!1,this.searchKeyword="",this.clearNews()}}};const Ba=(0,w.A)(Pa,[["render",Ta],["__scopeId","data-v-89f452d6"]]);var Ka=Ba;const Fa={class:"login"},Wa={class:"login-container"},Ha={class:"login-card"},Qa={class:"login-body"},ja={key:0,class:"alert alert-error"},qa={class:"social-login"};function za(a,t,s,e,o,i){return(0,r.uX)(),(0,r.CE)("div",Fa,[(0,r.Lk)("div",Wa,[(0,r.Lk)("div",Ha,[t[5]||(t[5]=(0,r.Lk)("div",{class:"login-header"},[(0,r.Lk)("h1",{class:"login-title"},"로그인"),(0,r.Lk)("p",{class:"login-subtitle"}," 소셜 계정으로 간편하게 로그인하세요 ")],-1)),(0,r.Lk)("div",Qa,[o.errorMessage?((0,r.uX)(),(0,r.CE)("div",ja,(0,n.v_)(o.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",qa,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...a)=>i.loginWithGoogle&&i.loginWithGoogle(...a)),class:"social-button google"},t[2]||(t[2]=[(0,r.Fv)('<svg class="social-icon" viewBox="0 0 24 24" data-v-2d36d908><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-2d36d908></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-2d36d908></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" data-v-2d36d908></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-2d36d908></path></svg> Google로 로그인 ',2)])),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...a)=>i.loginWithKakao&&i.loginWithKakao(...a)),class:"social-button kakao"},t[3]||(t[3]=[(0,r.Lk)("svg",{class:"social-icon",viewBox:"0 0 24 24"},[(0,r.Lk)("path",{fill:"#000000",d:"M12 3c5.799 0 10.5 3.664 10.5 8.185 0 4.52-4.701 8.184-10.5 8.184a13.5 13.5 0 0 1-1.727-.11l-4.408 2.883c-.501.265-.678.236-.472-.413l.518-3.467C3.462 16.4 1.5 14.376 1.5 11.185 1.5 6.665 6.201 3 12 3z"})],-1),(0,r.eW)(" 카카오로 로그인 ",-1)]))]),t[4]||(t[4]=(0,r.Lk)("div",{class:"service-info"},[(0,r.Lk)("h3",{class:"info-title"},"로그인 후 이용 가능한 서비스"),(0,r.Lk)("ul",{class:"info-list"},[(0,r.Lk)("li",null,"AI 기반 자동매매 전략 설정"),(0,r.Lk)("li",null,"실시간 주식 자동매매 실행"),(0,r.Lk)("li",null,"개인화된 투자 포트폴리오 관리"),(0,r.Lk)("li",null,"매매 내역 및 수익률 분석")])],-1))]),t[6]||(t[6]=(0,r.Lk)("div",{class:"login-footer"},[(0,r.Lk)("p",{class:"footer-text"},[(0,r.eW)(" 로그인하면 "),(0,r.Lk)("a",{href:"#",class:"footer-link"},"서비스 이용약관"),(0,r.eW)("과 "),(0,r.Lk)("a",{href:"#",class:"footer-link"},"개인정보처리방침"),(0,r.eW)("에 동의하는 것으로 간주됩니다. ")])],-1))])])])}s(4979);const Va=a=>{const t="https://tradesiteback.onrender.com/api";"google"===a?window.location.href=`${t}/auth/google`:"kakao"===a&&(window.location.href=`${t}/auth/kakao`)};var Ya={name:"LoginPage",data(){return{errorMessage:null}},created(){const a=this.$route.query.error;"auth_failed"===a&&(this.errorMessage="로그인에 실패했습니다. 다시 시도해주세요.")},methods:{...(0,_.i0)("auth",["loginWithToken"]),loginWithGoogle(){this.clearError(),Va("google")},loginWithKakao(){this.clearError(),Va("kakao")},clearError(){this.errorMessage=null}}};const Ja=(0,w.A)(Ya,[["render",za],["__scopeId","data-v-2d36d908"]]);var Za=Ja;const at={class:"trading"},tt={class:"container"},st={class:"status-dashboard"},et={class:"status-cards"},rt={class:"status-card"},ot={class:"status-content"},it={class:"status-card"},lt={class:"status-content"},nt={class:"status-value"},ct={class:"status-card"},dt={class:"status-content"},ut={class:"status-value"},gt={class:"status-card"},ht={class:"status-content"},kt={class:"status-value"},vt={class:"strategy-section"},pt={class:"history-section"},mt={class:"card"},Lt={class:"card-header"},ft={class:"header-actions"},yt=["disabled"],bt={class:"card-body"},St={key:0,class:"loading-state"},_t={key:1,class:"empty-state"},Tt={key:2,class:"orders-container"},wt={class:"orders-table desktop-only"},Ct={class:"table-cell"},Et={class:"table-cell"},At={class:"stock-info"},It={class:"stock-name"},Rt={class:"table-cell"},Ot={class:"strategy-info"},Xt={class:"strategy-name"},Nt={class:"table-cell"},$t={class:"table-cell"},Mt={class:"table-cell"},Dt={class:"table-cell"},xt={class:"table-cell"},Ut={class:"table-cell"},Gt={key:0,class:"technical-analysis"},Pt=["onClick"],Bt={key:0,class:"analysis-detail"},Kt={key:1,class:"no-analysis"},Ft={class:"orders-cards mobile-only"},Wt={class:"order-header"},Ht={class:"stock-info"},Qt={class:"stock-name"},jt={class:"order-badges"},qt={key:0,class:"order-details"},zt={class:"detail-row"},Vt={class:"detail-row"},Yt={class:"detail-row"},Jt={class:"detail-row"},Zt={class:"total-amount"},as={key:1,class:"technical-analysis-mobile"},ts={class:"analysis-header"},ss=["onClick"],es={key:0,class:"analysis-detail-mobile"},rs={class:"order-footer"},os={class:"strategy-name"},is={class:"footer-right"},ls={class:"order-time"},ns={key:0,class:"show-more"};function cs(a,t,s,e,o,i){const l=(0,r.g2)("TradingStrategy");return(0,r.uX)(),(0,r.CE)("div",at,[(0,r.Lk)("div",tt,[t[20]||(t[20]=(0,r.Lk)("div",{class:"page-header"},[(0,r.Lk)("h1",{class:"page-title"},"자동매매 관리"),(0,r.Lk)("p",{class:"page-subtitle"}," AI 기반 투자 전략을 설정하고 자동매매를 실행하세요 ")],-1)),(0,r.Lk)("div",st,[(0,r.Lk)("div",et,[(0,r.Lk)("div",rt,[t[3]||(t[3]=(0,r.Lk)("div",{class:"status-icon trading"},[(0,r.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})])],-1)),(0,r.Lk)("div",ot,[t[2]||(t[2]=(0,r.Lk)("h3",{class:"status-title"},"매매 상태",-1)),(0,r.Lk)("p",{class:(0,n.C4)(["status-value",{active:a.isTrading,inactive:!a.isTrading}])},(0,n.v_)(a.isTrading?"실행 중":"대기 중"),3)])]),(0,r.Lk)("div",it,[t[5]||(t[5]=(0,r.Lk)("div",{class:"status-icon strategy"},[(0,r.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),(0,r.Lk)("div",lt,[t[4]||(t[4]=(0,r.Lk)("h3",{class:"status-title"},"활성 전략",-1)),(0,r.Lk)("p",nt,(0,n.v_)(a.currentStrategy?a.currentStrategy.strategy_name:"없음"),1)])]),(0,r.Lk)("div",ct,[t[7]||(t[7]=(0,r.Lk)("div",{class:"status-icon region"},[(0,r.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})])],-1)),(0,r.Lk)("div",dt,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"status-title"},"투자 지역",-1)),(0,r.Lk)("p",ut,(0,n.v_)(a.currentStrategy?"domestic"===a.currentStrategy.region?"국내":"해외":"-"),1)])]),(0,r.Lk)("div",gt,[t[9]||(t[9]=(0,r.Lk)("div",{class:"status-icon orders"},[(0,r.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})])],-1)),(0,r.Lk)("div",ht,[t[8]||(t[8]=(0,r.Lk)("h3",{class:"status-title"},"총 매매 건수",-1)),(0,r.Lk)("p",kt,(0,n.v_)(o.tradingHistory.length)+"건 ",1)])])])]),(0,r.Lk)("div",vt,[(0,r.bF)(l)]),(0,r.Lk)("div",pt,[(0,r.Lk)("div",mt,[(0,r.Lk)("div",Lt,[t[11]||(t[11]=(0,r.Lk)("h2",{class:"card-title"},"최근 매매 이력",-1)),(0,r.Lk)("div",ft,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...a)=>i.refreshHistory&&i.refreshHistory(...a)),class:"btn btn-sm btn-outline",disabled:o.historyLoading},t[10]||(t[10]=[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1),(0,r.eW)(" 새로고침 ",-1)]),8,yt)])]),(0,r.Lk)("div",bt,[o.historyLoading?((0,r.uX)(),(0,r.CE)("div",St,t[12]||(t[12]=[(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1),(0,r.Lk)("p",null,"매매 이력을 불러오는 중...",-1)]))):i.hasOrders?((0,r.uX)(),(0,r.CE)("div",Tt,[(0,r.Lk)("div",wt,[t[14]||(t[14]=(0,r.Fv)('<div class="table-header" data-v-40956b30><div class="table-cell" data-v-40956b30>시간</div><div class="table-cell" data-v-40956b30>종목</div><div class="table-cell" data-v-40956b30>전략</div><div class="table-cell" data-v-40956b30>구분</div><div class="table-cell" data-v-40956b30>수량</div><div class="table-cell" data-v-40956b30>가격</div><div class="table-cell" data-v-40956b30>총액</div><div class="table-cell" data-v-40956b30>상태</div><div class="table-cell" data-v-40956b30>분석정보</div></div>',1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.displayedOrders,a=>((0,r.uX)(),(0,r.CE)("div",{key:a.id,class:(0,n.C4)(["table-row",{"rebalancing-row":a.is_rebalancing}])},[(0,r.Lk)("div",Ct,(0,n.v_)(i.formatDateTime(a.executed_at||a.created_at)),1),(0,r.Lk)("div",Et,[(0,r.Lk)("div",At,[(0,r.Lk)("strong",null,(0,n.v_)(a.stock_code),1),(0,r.Lk)("span",It,(0,n.v_)(a.stock_name||"종목명"),1),(0,r.Lk)("span",{class:(0,n.C4)(["region-badge",a.region])},(0,n.v_)("domestic"===a.region?"🇰🇷":"🌍"),3)])]),(0,r.Lk)("div",Rt,[(0,r.Lk)("div",Ot,[(0,r.Lk)("span",Xt,(0,n.v_)(a.strategy_name),1),(0,r.Lk)("span",{class:(0,n.C4)(["market-type",a.market_type])},(0,n.v_)("bull"===a.market_type?"상승장":"하락장"),3)])]),(0,r.Lk)("div",Nt,[(0,r.Lk)("span",{class:(0,n.C4)(["order-type",a.order_type?a.order_type.toLowerCase():""])},(0,n.v_)(i.getOrderTypeText(a.order_type)),3)]),(0,r.Lk)("div",$t,(0,n.v_)(a.is_rebalancing?"-":i.formatNumber(a.quantity)+"주"),1),(0,r.Lk)("div",Mt,(0,n.v_)(a.is_rebalancing?"-":i.formatPrice(a.executed_price||a.order_price,a.region)),1),(0,r.Lk)("div",Dt,(0,n.v_)(a.is_rebalancing?"-":i.formatPrice(a.total_amount,a.region)),1),(0,r.Lk)("div",xt,[(0,r.Lk)("span",{class:(0,n.C4)(["order-status",a.status?a.status.toLowerCase():""])},(0,n.v_)(i.getStatusText(a.status)),3)]),(0,r.Lk)("div",Ut,[a.technical_analysis?((0,r.uX)(),(0,r.CE)("div",Gt,[(0,r.Lk)("button",{onClick:t=>i.toggleAnalysisDetail(a.id),class:(0,n.C4)(["analysis-toggle",{expanded:o.expandedAnalysis[a.id]}])}," 📊 분석정보 ",10,Pt),o.expandedAnalysis[a.id]?((0,r.uX)(),(0,r.CE)("div",Bt,(0,n.v_)(a.technical_analysis),1)):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("span",Kt,"-"))])],2))),128))]),(0,r.Lk)("div",Ft,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.displayedOrders,a=>((0,r.uX)(),(0,r.CE)("div",{key:a.id,class:(0,n.C4)(["order-card",{"rebalancing-card":a.is_rebalancing}])},[(0,r.Lk)("div",Wt,[(0,r.Lk)("div",Ht,[(0,r.Lk)("strong",null,(0,n.v_)(a.stock_code),1),(0,r.Lk)("span",Qt,(0,n.v_)(a.stock_name||"종목명"),1)]),(0,r.Lk)("div",jt,[(0,r.Lk)("span",{class:(0,n.C4)(["region-badge",a.region])},(0,n.v_)("domestic"===a.region?"🇰🇷":"🌍"),3),(0,r.Lk)("span",{class:(0,n.C4)(["market-type",a.market_type])},(0,n.v_)("bull"===a.market_type?"상승장":"하락장"),3)])]),a.is_rebalancing?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",qt,[(0,r.Lk)("div",zt,[t[15]||(t[15]=(0,r.Lk)("span",{class:"label"},"구분:",-1)),(0,r.Lk)("span",{class:(0,n.C4)(["order-type",a.order_type?a.order_type.toLowerCase():""])},(0,n.v_)(i.getOrderTypeText(a.order_type)),3)]),(0,r.Lk)("div",Vt,[t[16]||(t[16]=(0,r.Lk)("span",{class:"label"},"수량:",-1)),(0,r.Lk)("span",null,(0,n.v_)(i.formatNumber(a.quantity))+"주",1)]),(0,r.Lk)("div",Yt,[t[17]||(t[17]=(0,r.Lk)("span",{class:"label"},"가격:",-1)),(0,r.Lk)("span",null,(0,n.v_)(i.formatPrice(a.executed_price||a.order_price,a.region)),1)]),(0,r.Lk)("div",Jt,[t[18]||(t[18]=(0,r.Lk)("span",{class:"label"},"총액:",-1)),(0,r.Lk)("span",Zt,(0,n.v_)(i.formatPrice(a.total_amount,a.region)),1)])])),a.technical_analysis?((0,r.uX)(),(0,r.CE)("div",as,[(0,r.Lk)("div",ts,[t[19]||(t[19]=(0,r.Lk)("span",{class:"analysis-label"},"📊 기술적 분석",-1)),(0,r.Lk)("button",{onClick:t=>i.toggleAnalysisDetail(a.id),class:"analysis-toggle-mobile"},(0,n.v_)(o.expandedAnalysis[a.id]?"접기":"펼치기"),9,ss)]),o.expandedAnalysis[a.id]?((0,r.uX)(),(0,r.CE)("div",es,(0,n.v_)(a.technical_analysis),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.Lk)("div",rs,[(0,r.Lk)("span",os,(0,n.v_)(a.strategy_name),1),(0,r.Lk)("div",is,[(0,r.Lk)("span",ls,(0,n.v_)(i.formatDateTime(a.executed_at||a.created_at)),1),(0,r.Lk)("span",{class:(0,n.C4)(["order-status",a.status?a.status.toLowerCase():""])},(0,n.v_)(i.getStatusText(a.status)),3)])])],2))),128))]),o.tradingHistory.length>o.displayLimit?((0,r.uX)(),(0,r.CE)("div",ns,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...a)=>i.showMore&&i.showMore(...a)),class:"btn btn-outline"}," 더보기 ("+(0,n.v_)(Math.min(10,o.tradingHistory.length-o.displayLimit))+"건 더) ",1)])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",_t,t[13]||(t[13]=[(0,r.Lk)("div",{class:"empty-icon"},"📊",-1),(0,r.Lk)("h3",null,"매매 이력이 없습니다",-1),(0,r.Lk)("p",null,"자동매매를 시작하면 매매 이력이 여기에 표시됩니다.",-1)])))])])]),t[21]||(t[21]=(0,r.Fv)('<div class="help-section" data-v-40956b30><div class="card" data-v-40956b30><div class="card-header" data-v-40956b30><h2 class="card-title" data-v-40956b30>자동매매 가이드</h2></div><div class="card-body" data-v-40956b30><div class="help-grid" data-v-40956b30><div class="help-item" data-v-40956b30><div class="help-icon" data-v-40956b30>⚙️</div><h3 class="help-title" data-v-40956b30>전략 설정</h3><p class="help-description" data-v-40956b30> 시장 상태와 투자 지역을 선택하고, 투자할 종목들과 각각의 투자 비율을 설정하세요. </p></div><div class="help-item" data-v-40956b30><div class="help-icon" data-v-40956b30>🚀</div><h3 class="help-title" data-v-40956b30>매매 시작</h3><p class="help-description" data-v-40956b30> 전략 설정 후 &quot;자동매매 시작&quot; 버튼을 클릭하면 설정된 조건에 따라 5분마다 자동으로 매매가 실행됩니다. </p></div><div class="help-item" data-v-40956b30><div class="help-icon" data-v-40956b30>📊</div><h3 class="help-title" data-v-40956b30>모니터링</h3><p class="help-description" data-v-40956b30> 실시간으로 매매 상태를 확인하고, 매매 이력을 통해 성과를 분석할 수 있습니다. </p></div><div class="help-item" data-v-40956b30><div class="help-icon" data-v-40956b30>⛔</div><h3 class="help-title" data-v-40956b30>매매 중단</h3><p class="help-description" data-v-40956b30> 언제든지 &quot;자동매매 종료&quot; 버튼을 클릭하여 자동매매를 안전하게 중단할 수 있습니다. </p></div></div></div></div></div>',1))])])}const ds={class:"strategy-form"},us={class:"card"},gs={class:"card-body"},hs={class:"form-group"},ks={class:"market-options"},vs={class:"market-option"},ps={class:"market-option"},ms={key:0,class:"strategy-details"},Ls={class:"strategy-detail-card"},fs={class:"detail-title"},ys={key:0,class:"strategy-explanation"},bs={key:1,class:"strategy-explanation"},Ss={class:"form-group"},_s={class:"region-options"},Ts={class:"region-option"},ws={class:"region-option"},Cs={class:"form-group"},Es={class:"market-status-info"},As={key:0,class:"market-status-loading"},Is={key:1,class:"market-status-display"},Rs={class:"status-indicator"},Os={class:"status-text"},Xs={class:"market-details"},Ns={class:"api-info"},$s={class:"check-time"},Ms={key:0,class:"error-info"},Ds={class:"status-actions"},xs={key:2,class:"market-status-error"},Us={key:3,class:"market-warning enhanced"},Gs={class:"warning-content"},Ps={key:4,class:"market-success"},Bs={class:"success-content"},Ks={class:"form-group"},Fs={class:"balance-info"},Ws={key:0,class:"balance-loading"},Hs={key:1,class:"balance-display"},Qs={class:"balance-item"},js={class:"balance-value"},qs={class:"balance-item"},zs={class:"balance-value available"},Vs={key:2,class:"balance-error"},Ys={class:"form-group"},Js={class:"stocks-container"},Zs={class:"stock-inputs"},ae=["onUpdate:modelValue","placeholder","onBlur","disabled"],te=["onUpdate:modelValue"],se={class:"allocation-input-group"},ee=["onUpdate:modelValue"],re=["onClick"],oe={key:0,class:"validation-loading"},ie={key:1,class:"form-error"},le={key:2,class:"stock-price"},ne={class:"allocation-summary"},ce={key:0,class:"allocation-warning"},de={key:1,class:"allocation-info"},ue={class:"card-footer"},ge={class:"strategy-actions"},he={class:"trading-status"},ke={key:0,class:"status-indicator active"},ve={key:1,class:"status-indicator inactive"},pe={class:"action-buttons"},me=["disabled"],Le={key:0,class:"loading-spinner"},fe=["disabled"],ye={key:0,class:"loading-spinner"};function be(a,t,s,o,i,l){return(0,r.uX)(),(0,r.CE)("div",ds,[(0,r.Lk)("div",us,[t[44]||(t[44]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h2",{class:"card-title"},"자동매매 전략 설정")],-1)),(0,r.Lk)("div",gs,[(0,r.Lk)("div",hs,[t[18]||(t[18]=(0,r.Lk)("label",{class:"form-label"},"시장 상태 및 전략 선택",-1)),(0,r.Lk)("div",ks,[(0,r.Lk)("label",vs,[(0,r.bo)((0,r.Lk)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>i.strategy.marketType=a),value:"bull",class:"market-radio"},null,512),[[e.XL,i.strategy.marketType]]),t[13]||(t[13]=(0,r.Fv)('<div class="market-card bull" data-v-65fafb96><div class="market-icon" data-v-65fafb96>📈</div><div class="market-label" data-v-65fafb96>상승장 모멘텀 전략</div><div class="market-desc" data-v-65fafb96><strong data-v-65fafb96>기술적 분석 기반 매매:</strong><br data-v-65fafb96> • RSI, MACD, 이동평균선 분석<br data-v-65fafb96> • 골든크로스 시 매수 신호<br data-v-65fafb96> • 모멘텀 지속성 확인 후 진입<br data-v-65fafb96> • 과매수 구간에서 일부 매도 </div><div class="strategy-indicators" data-v-65fafb96><span class="indicator" data-v-65fafb96>RSI 30-70</span><span class="indicator" data-v-65fafb96>MACD↗</span><span class="indicator" data-v-65fafb96>MA정배열</span></div></div>',1))]),(0,r.Lk)("label",ps,[(0,r.bo)((0,r.Lk)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>i.strategy.marketType=a),value:"bear",class:"market-radio"},null,512),[[e.XL,i.strategy.marketType]]),t[14]||(t[14]=(0,r.Fv)('<div class="market-card bear" data-v-65fafb96><div class="market-icon" data-v-65fafb96>📉</div><div class="market-label" data-v-65fafb96>하락장 가치투자 전략</div><div class="market-desc" data-v-65fafb96><strong data-v-65fafb96>역추세 매매 및 손절관리:</strong><br data-v-65fafb96> • RSI 과매도 구간 매수<br data-v-65fafb96> • 볼린저밴드 하단 터치시 진입<br data-v-65fafb96> • 장기 이평선 이탈시 손절<br data-v-65fafb96> • 분할 매수로 리스크 분산 </div><div class="strategy-indicators" data-v-65fafb96><span class="indicator" data-v-65fafb96>RSI &lt;30</span><span class="indicator" data-v-65fafb96>볼린저하단</span><span class="indicator" data-v-65fafb96>가치매수</span></div></div>',1))])]),i.strategy.marketType?((0,r.uX)(),(0,r.CE)("div",ms,[(0,r.Lk)("div",Ls,[(0,r.Lk)("h4",fs,(0,n.v_)("bull"===i.strategy.marketType?"상승장 모멘텀 전략":"하락장 가치투자 전략")+" 상세 정보 ",1),"bull"===i.strategy.marketType?((0,r.uX)(),(0,r.CE)("div",ys,t[15]||(t[15]=[(0,r.Fv)('<div class="explanation-section" data-v-65fafb96><h5 data-v-65fafb96>📊 사용하는 기술적 지표</h5><ul data-v-65fafb96><li data-v-65fafb96><strong data-v-65fafb96>RSI (14일):</strong> 30-70 구간에서 매수, 80 이상시 매도</li><li data-v-65fafb96><strong data-v-65fafb96>이동평균선:</strong> 5일선 &gt; 20일선 정배열시 매수 신호</li><li data-v-65fafb96><strong data-v-65fafb96>MACD:</strong> 골든크로스 형성시 매수 진입</li><li data-v-65fafb96><strong data-v-65fafb96>모멘텀:</strong> 10일간 +5% 이상시 추가 매수</li></ul></div><div class="explanation-section" data-v-65fafb96><h5 data-v-65fafb96>⚡ 매매 실행 로직</h5><ul data-v-65fafb96><li data-v-65fafb96>신호 강도 40점 이상시 매수 실행</li><li data-v-65fafb96>신호 강도에 따라 투자 비중 조절 (최대 120%)</li><li data-v-65fafb96>30분 간격으로 중복 주문 방지</li><li data-v-65fafb96>과매수 신호시 보유량의 30-80% 매도</li></ul></div>',2)]))):((0,r.uX)(),(0,r.CE)("div",bs,t[16]||(t[16]=[(0,r.Fv)('<div class="explanation-section" data-v-65fafb96><h5 data-v-65fafb96>📊 사용하는 기술적 지표</h5><ul data-v-65fafb96><li data-v-65fafb96><strong data-v-65fafb96>RSI (14일):</strong> 30 미만 과매도시 매수, 70 이상시 매도</li><li data-v-65fafb96><strong data-v-65fafb96>볼린저밴드:</strong> 하단 터치시 매수, 상단 도달시 매도</li><li data-v-65fafb96><strong data-v-65fafb96>50일 이동평균:</strong> 10% 이상 하락시 가치매수</li><li data-v-65fafb96><strong data-v-65fafb96>장기 모멘텀:</strong> 20일간 -15% 이상 하락시 진입</li></ul></div><div class="explanation-section" data-v-65fafb96><h5 data-v-65fafb96>🛡️ 리스크 관리 로직</h5><ul data-v-65fafb96><li data-v-65fafb96>분할 매수로 평균 단가 낮추기</li><li data-v-65fafb96>극심한 하락(-25%)시 손절매 실행</li><li data-v-65fafb96>과매수 구간에서 점진적 매도</li><li data-v-65fafb96>포트폴리오 리밸런싱 자동 제안</li></ul></div>',2)]))),t[17]||(t[17]=(0,r.Lk)("div",{class:"strategy-warning"},[(0,r.Lk)("div",{class:"warning-icon"},"⚠️"),(0,r.Lk)("div",{class:"warning-text"},[(0,r.Lk)("strong",null,"주의사항:"),(0,r.eW)(" 모든 기술적 분석은 과거 데이터를 기반으로 하며, 미래 수익을 보장하지 않습니다. 투자에 따른 손실의 책임은 투자자 본인에게 있습니다. ")])],-1))])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ss,[t[21]||(t[21]=(0,r.Lk)("label",{class:"form-label"},"투자 지역",-1)),(0,r.Lk)("div",_s,[(0,r.Lk)("label",Ts,[(0,r.bo)((0,r.Lk)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=a=>i.strategy.region=a),value:"domestic",class:"region-radio",onChange:t[3]||(t[3]=(...a)=>l.onRegionChange&&l.onRegionChange(...a))},null,544),[[e.XL,i.strategy.region]]),t[19]||(t[19]=(0,r.Lk)("div",{class:"region-card"},[(0,r.Lk)("span",{class:"region-flag"},"🇰🇷"),(0,r.Lk)("span",{class:"region-text"},"국내 투자")],-1))]),(0,r.Lk)("label",ws,[(0,r.bo)((0,r.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=a=>i.strategy.region=a),value:"global",class:"region-radio",onChange:t[5]||(t[5]=(...a)=>l.onRegionChange&&l.onRegionChange(...a))},null,544),[[e.XL,i.strategy.region]]),t[20]||(t[20]=(0,r.Lk)("div",{class:"region-card"},[(0,r.Lk)("span",{class:"region-flag"},"🌍"),(0,r.Lk)("span",{class:"region-text"},"해외 투자")],-1))])])]),(0,r.Lk)("div",Cs,[t[31]||(t[31]=(0,r.Lk)("label",{class:"form-label"},[(0,r.eW)(" 현재 시장 상태 "),(0,r.Lk)("span",{class:"api-source"},"(한국투자증권 API 실시간)")],-1)),(0,r.Lk)("div",Es,[i.marketStatusLoading?((0,r.uX)(),(0,r.CE)("div",As,t[22]||(t[22]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("span",null,"KIS API로 시장 상태 확인 중...",-1)]))):i.marketStatus?((0,r.uX)(),(0,r.CE)("div",Is,[(0,r.Lk)("div",{class:(0,n.C4)(["market-status-item",{"market-open":i.marketStatus.isOpen,"market-closed":!i.marketStatus.isOpen}])},[(0,r.Lk)("div",Rs,[(0,r.Lk)("span",{class:(0,n.C4)(["status-dot",{open:i.marketStatus.isOpen,closed:!i.marketStatus.isOpen}])},null,2),(0,r.Lk)("span",Os,(0,n.v_)(i.marketStatus.statusText),1)]),(0,r.Lk)("div",Xs,[(0,r.Lk)("small",Ns,(0,n.v_)("KIS_API"===i.marketStatus.source?"🟢 실시간 API 데이터":"FALLBACK_TIME"===i.marketStatus.source?"🟡 시간 기반 추정":"🔴 API 오류"),1),(0,r.Lk)("small",$s," 마지막 확인: "+(0,n.v_)(l.formatDateTime(i.marketStatus.checkedAt)),1),i.marketStatus.error?((0,r.uX)(),(0,r.CE)("small",Ms," 오류: "+(0,n.v_)(i.marketStatus.error),1)):(0,r.Q3)("",!0)])],2),(0,r.Lk)("div",Ds,[(0,r.Lk)("button",{onClick:t[6]||(t[6]=(...a)=>l.refreshMarketStatus&&l.refreshMarketStatus(...a)),class:"btn btn-sm btn-outline refresh-btn"}," 🔄 즉시 새로고침 "),t[23]||(t[23]=(0,r.Lk)("small",{class:"auto-refresh-info"},"2분마다 자동 새로고침",-1))])])):((0,r.uX)(),(0,r.CE)("div",xs,[t[24]||(t[24]=(0,r.Lk)("span",null,"❌ 시장 상태를 확인할 수 없습니다.",-1)),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...a)=>l.loadMarketStatus&&l.loadMarketStatus(...a)),class:"btn btn-sm btn-outline"},"다시 시도")])),i.marketStatus&&!i.marketStatus.isOpen?((0,r.uX)(),(0,r.CE)("div",Us,[t[27]||(t[27]=(0,r.Lk)("div",{class:"warning-icon"},"🚫",-1)),(0,r.Lk)("div",Gs,[t[25]||(t[25]=(0,r.Lk)("strong",null,"자동매매 시작 불가",-1)),(0,r.Lk)("p",null,(0,n.v_)(i.marketStatus.message),1),t[26]||(t[26]=(0,r.Lk)("p",{class:"warning-notice"}," 한국투자증권 API에서 시장이 마감되었음을 확인했습니다. 시장이 열려있을 때만 자동매매를 시작할 수 있습니다. ",-1))])])):(0,r.Q3)("",!0),i.marketStatus&&i.marketStatus.isOpen?((0,r.uX)(),(0,r.CE)("div",Ps,[t[30]||(t[30]=(0,r.Lk)("div",{class:"success-icon"},"✅",-1)),(0,r.Lk)("div",Bs,[t[28]||(t[28]=(0,r.Lk)("strong",null,"자동매매 시작 가능",-1)),(0,r.Lk)("p",null,(0,n.v_)(i.marketStatus.message),1),t[29]||(t[29]=(0,r.Lk)("p",{class:"success-notice"}," 실시간 API 확인 결과 시장이 열려있어 자동매매를 시작할 수 있습니다. ",-1))])])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Ks,[t[36]||(t[36]=(0,r.Lk)("label",{class:"form-label"},"투자 가능 금액",-1)),(0,r.Lk)("div",Fs,[i.balanceLoading?((0,r.uX)(),(0,r.CE)("div",Ws,t[32]||(t[32]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("span",null,"잔고 조회 중...",-1)]))):i.accountBalance?((0,r.uX)(),(0,r.CE)("div",Hs,[(0,r.Lk)("div",Qs,[t[33]||(t[33]=(0,r.Lk)("span",{class:"balance-label"},"총 예수금:",-1)),(0,r.Lk)("span",js,(0,n.v_)(l.formatCurrency(i.accountBalance.totalDeposit,i.strategy.region)),1)]),(0,r.Lk)("div",qs,[t[34]||(t[34]=(0,r.Lk)("span",{class:"balance-label"},"주문 가능 금액:",-1)),(0,r.Lk)("span",zs,(0,n.v_)(l.formatCurrency(i.accountBalance.availableAmount,i.strategy.region)),1)])])):((0,r.uX)(),(0,r.CE)("div",Vs,[t[35]||(t[35]=(0,r.Lk)("span",null,"잔고 정보를 불러올 수 없습니다.",-1)),(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...a)=>l.loadAccountBalance&&l.loadAccountBalance(...a)),class:"btn btn-sm btn-outline"},"다시 시도")]))])]),(0,r.Lk)("div",Ys,[t[39]||(t[39]=(0,r.Lk)("label",{class:"form-label"},"종목 구성",-1)),(0,r.Lk)("div",Js,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.strategy.stocks,(a,s)=>((0,r.uX)(),(0,r.CE)("div",{key:s,class:"stock-item"},[(0,r.Lk)("div",Zs,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>a.code=t,placeholder:"domestic"===i.strategy.region?"종목코드 (예: 005930)":"티커 (예: AAPL)",class:"form-input stock-code",onBlur:a=>l.validateStockCode(s),disabled:a.validating},null,40,ae),[[e.Jo,a.code]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>a.name=t,placeholder:"종목명",class:"form-input stock-name",readonly:""},null,8,te),[[e.Jo,a.name]]),(0,r.Lk)("div",se,[(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t=>a.allocation=t,min:"1",max:"100",placeholder:"비율",class:"form-input allocation-input",onInput:t[9]||(t[9]=(...a)=>l.updateTotalAllocation&&l.updateTotalAllocation(...a))},null,40,ee),[[e.Jo,a.allocation]]),t[37]||(t[37]=(0,r.Lk)("span",{class:"allocation-unit"},"%",-1))]),i.strategy.stocks.length>1?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:a=>l.removeStock(s),class:"btn-remove",type:"button"}," × ",8,re)):(0,r.Q3)("",!0)]),a.validating?((0,r.uX)(),(0,r.CE)("div",oe,t[38]||(t[38]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("span",null,"종목 정보 확인 중...",-1)]))):(0,r.Q3)("",!0),a.error?((0,r.uX)(),(0,r.CE)("div",ie,(0,n.v_)(a.error),1)):(0,r.Q3)("",!0),a.price?((0,r.uX)(),(0,r.CE)("div",le," 현재가: "+(0,n.v_)(l.formatCurrency(a.price,i.strategy.region)),1)):(0,r.Q3)("",!0)]))),128)),(0,r.Lk)("button",{onClick:t[10]||(t[10]=(...a)=>l.addStock&&l.addStock(...a)),class:"btn btn-outline btn-sm add-stock-btn",type:"button"}," + 종목 추가 "),(0,r.Lk)("div",ne,[(0,r.Lk)("span",{class:(0,n.C4)(["total-allocation",{"over-100":i.totalAllocation>100}])}," 총 투자 비율: "+(0,n.v_)(i.totalAllocation)+"% ",3),i.totalAllocation>100?((0,r.uX)(),(0,r.CE)("span",ce," (100%를 초과했습니다) ")):(0,r.Q3)("",!0),i.totalAllocation<100?((0,r.uX)(),(0,r.CE)("span",de," (남은 비율: "+(0,n.v_)(100-i.totalAllocation)+"%) ",1)):(0,r.Q3)("",!0)])])])]),(0,r.Lk)("div",ue,[(0,r.Lk)("div",ge,[(0,r.Lk)("div",he,[a.isTrading?((0,r.uX)(),(0,r.CE)("span",ke,t[40]||(t[40]=[(0,r.Lk)("span",{class:"status-dot"},null,-1),(0,r.eW)(" 자동매매 실행 중 ",-1)]))):((0,r.uX)(),(0,r.CE)("span",ve,t[41]||(t[41]=[(0,r.Lk)("span",{class:"status-dot"},null,-1),(0,r.eW)(" 자동매매 대기 중 ",-1)])))]),(0,r.Lk)("div",pe,[a.isTrading?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[11]||(t[11]=(...a)=>l.handleStartTrading&&l.handleStartTrading(...a)),disabled:!l.isValidStrategy||l.loading||i.marketStatus&&!i.marketStatus.isOpen,class:"btn btn-success"},[l.loading?((0,r.uX)(),(0,r.CE)("span",Le)):(0,r.Q3)("",!0),t[42]||(t[42]=(0,r.eW)(" 자동매매 시작 ",-1))],8,me)),a.isTrading?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[12]||(t[12]=(...a)=>l.handleStopTrading&&l.handleStopTrading(...a)),disabled:l.loading,class:"btn btn-danger"},[l.loading?((0,r.uX)(),(0,r.CE)("span",ye)):(0,r.Q3)("",!0),t[43]||(t[43]=(0,r.eW)(" 자동매매 종료 ",-1))],8,fe)):(0,r.Q3)("",!0)])])])])])}s(8111),s(1148),s(7588),s(1701),s(8237),s(3579);var Se={name:"TradingStrategy",data(){return{strategy:{marketType:"bull",region:"domestic",stocks:[{code:"",name:"",allocation:50,error:null,validating:!1,price:null}]},totalAllocation:50,accountBalance:null,balanceLoading:!1,marketStatus:null,marketStatusLoading:!1,marketStatusTimer:null}},computed:{...(0,_.L8)("trading",["isTrading","currentStrategy","isLoading"]),loading(){return this.isLoading},debugTradingState(){const a={isTrading:this.isTrading,currentStrategy:this.currentStrategy,isLoading:this.isLoading};return console.log("🔍 현재 트레이딩 상태:",a),a},isValidStrategy(){return this.strategy.marketType&&this.strategy.region&&this.strategy.stocks.every(a=>a.code&&a.allocation>0)&&this.totalAllocation>0&&this.totalAllocation<=100&&!this.strategy.stocks.some(a=>a.error||a.validating)}},async created(){await this.loadTradingStatus(),await this.loadAccountBalance(),await this.loadMarketStatus(),this.currentStrategy&&this.loadCurrentStrategy()},mounted(){this.startMarketStatusAutoRefresh()},beforeUnmount(){this.stopMarketStatusAutoRefresh()},methods:{...(0,_.i0)("trading",["loadTradingStatus","createStrategy","startTrading","stopTrading"]),loadCurrentStrategy(){this.currentStrategy&&(this.strategy={marketType:this.currentStrategy.marketType,region:this.currentStrategy.region,stocks:this.currentStrategy.stocks||[{code:"",name:"",allocation:50,error:null,validating:!1,price:null}]},this.updateTotalAllocation())},async onRegionChange(){this.loadAccountBalance(),this.strategy.stocks.forEach(a=>{a.name="",a.error=null,a.price=null}),this.stopMarketStatusAutoRefresh(),await this.loadMarketStatus(),this.startMarketStatusAutoRefresh()},async loadAccountBalance(){this.balanceLoading=!0;try{const a="domestic"===this.strategy.region?"/trading/account/balance/domestic":"/trading/account/balance/global",t=await M.get(a);t.data.success&&(this.accountBalance=t.data.data)}catch(a){console.error("잔고 조회 실패:",a),this.accountBalance=null}finally{this.balanceLoading=!1}},async loadMarketStatus(){if(this.strategy.region){this.marketStatusLoading=!0;try{const a=await M.get("/trading/market-status",{params:{region:this.strategy.region}});a.data.success&&(this.marketStatus=a.data.data,console.log("📊 시장 상태 로드 완료:",this.marketStatus))}catch(a){console.error("❌ 시장 상태 로드 실패:",a),this.marketStatus=null}finally{this.marketStatusLoading=!1}}},async refreshMarketStatus(){await this.loadMarketStatus(),this.$toast&&this.$toast.success("시장 상태가 업데이트되었습니다.")},stopMarketStatusAutoRefresh(){this.marketStatusTimer&&(console.log("⏹️ 시장 상태 자동 새로고침 중단"),clearInterval(this.marketStatusTimer),this.marketStatusTimer=null)},addStock(){this.strategy.stocks.length<10&&this.strategy.stocks.push({code:"",name:"",allocation:0,error:null,validating:!1,price:null})},removeStock(a){this.strategy.stocks.splice(a,1),this.updateTotalAllocation()},updateTotalAllocation(){this.totalAllocation=this.strategy.stocks.reduce((a,t)=>a+(parseInt(t.allocation)||0),0)},async validateStockCode(a){const t=this.strategy.stocks[a];if(!t.code)return t.error=null,t.name="",void(t.price=null);t.validating=!0,t.error=null;try{let a,s;if("domestic"===this.strategy.region){if(!/^\d{6}$/.test(t.code))return t.error="올바른 종목 코드를 입력해주세요 (6자리 숫자)",t.name="",void(t.price=null);a="/trading/stock/info/domestic",s=await M.get(a,{params:{stockCode:t.code}})}else{if(!/^[A-Z]{1,5}$/.test(t.code.toUpperCase()))return t.error="올바른 티커를 입력해주세요 (1-5자리 영문)",t.name="",void(t.price=null);t.code=t.code.toUpperCase(),a="/trading/stock/info/global",s=await M.get(a,{params:{ticker:t.code}})}if(s.data.success){const a=s.data.data;t.name=a.name,t.price=a.price,t.error=null}else t.error=s.data.message||"종목 정보를 찾을 수 없습니다",t.name="",t.price=null}catch(s){console.error("종목 검증 오류:",s),t.error="종목 정보를 가져올 수 없습니다",t.name="",t.price=null}finally{t.validating=!1}},async handleStartTrading(){try{if(console.log("🔍 자동매매 시작 프로세스 시작"),console.log("🕐 시장 상태 재확인 중..."),await this.loadMarketStatus(),this.marketStatus&&!this.marketStatus.isOpen)return console.log("❌ 시장 마감으로 인한 자동매매 시작 불가"),void(this.$toast&&this.$toast.error(`${this.marketStatus.statusText}\n시장이 열려있을 때 다시 시도해주세요.`));console.log("📊 전략 데이터 검증 중...");const a={marketType:this.strategy.marketType,region:this.strategy.region,stocks:this.strategy.stocks.map(a=>({code:a.code,name:a.name||a.code,allocation:parseInt(a.allocation)||0}))};console.log("📤 전략 생성용 데이터:",JSON.stringify(a,null,2));const t=a.stocks.reduce((a,t)=>a+t.allocation,0);if(console.log("🔢 계산된 총 투자 비율:",t),100!==t)return console.error("❌ 투자 비율 오류:",t),void(this.$toast&&this.$toast.error(`총 투자 비율이 100%가 되어야 합니다. (현재: ${t}%)`));console.log("✍️ 전략 생성 중...");const s=await this.createStrategy(a);if(!s)return console.error("❌ 전략 생성 실패"),void(this.$toast&&this.$toast.error("전략 생성에 실패했습니다."));console.log("✅ 전략 생성 성공"),await new Promise(a=>setTimeout(a,500));const e=this.currentStrategy;if(console.log("📊 생성된 전략 확인:",e),!e||!e.id){console.error("❌ 생성된 전략을 찾을 수 없음"),await this.loadTradingStatus();const a=this.currentStrategy;if(!a||!a.id)return void(this.$toast&&this.$toast.error("전략 생성은 성공했지만 전략 정보를 찾을 수 없습니다."));console.log("✅ 재시도로 전략 발견:",a)}const r=e||this.currentStrategy;console.log("🚀 자동매매 시작 중... strategyId:",r.id,"타입:",typeof r.id);const o=await this.startTrading(r.id);o?(console.log("✅ 자동매매 시작 성공!"),await this.loadTradingStatus(),await this.loadMarketStatus(),this.$toast&&this.$toast.success("🟢 시장이 열려있어 자동매매가 시작되었습니다!")):(console.error("❌ 자동매매 시작 실패 - startTrading 메서드에서 false 반환"),await this.loadMarketStatus(),this.$toast&&this.$toast.error("자동매매 시작이 거부되었습니다. 시장 상태를 확인해주세요."))}catch(a){console.error("❌ handleStartTrading 전체 오류:",a),console.error("❌ 오류 스택:",a.stack),a.response&&a.response.data&&a.response.data.message?(console.error("서버 오류 메시지:",a.response.data.message),console.error("서버 오류 전체:",a.response.data),this.$toast&&this.$toast.error(a.response.data.message),"MARKET_CLOSED"===a.response.data.reason&&await this.loadMarketStatus()):this.$toast&&this.$toast.error("자동매매 시작 중 오류가 발생했습니다.")}},async handleStopTrading(){try{console.log("⏹️ 자동매매 중단 요청 시작"),this.$store.commit("trading/SET_IS_TRADING",!1);const a=await this.stopTrading();if(a){console.log("✅ 자동매매 중단 API 성공"),await new Promise(a=>setTimeout(a,1500)),await this.loadTradingStatus();const a=this.$store.getters["trading/isTrading"];console.log("🔍 최종 확인된 상태:",a),!0===a&&(console.log("⚠️ 상태가 여전히 true - 강제로 false 설정"),this.$store.commit("trading/SET_IS_TRADING",!1),this.$store.commit("trading/SET_CURRENT_STRATEGY",null)),this.$toast&&this.$toast.success("자동매매가 중단되었습니다."),console.log("✅ 자동매매 중단 처리 완료")}else console.error("❌ 자동매매 중단 API 실패 - 상태 복원"),await this.loadTradingStatus(),this.$toast&&this.$toast.error("자동매매 중단에 실패했습니다.")}catch(a){console.error("❌ handleStopTrading 전체 오류:",a),await this.loadTradingStatus(),this.$toast&&this.$toast.error("자동매매 중단 중 오류가 발생했습니다.")}},formatCurrency(a,t){if(!a)return"-";const s="string"===typeof a?parseFloat(a):a;return isNaN(s)?"-":"domestic"===t?s.toLocaleString()+"원":"$"+s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},formatDateTime(a){if(!a)return"-";try{const t=new Date(a);return isNaN(t.getTime())?"-":t.toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return a}}}};const _e=(0,w.A)(Se,[["render",be],["__scopeId","data-v-65fafb96"]]);var Te=_e,we={name:"TradingPage",components:{TradingStrategy:Te},data(){return{tradingHistory:[],historyLoading:!1,displayLimit:10,expandedAnalysis:{}}},computed:{...(0,_.L8)("trading",["isTrading","currentStrategy","isLoading"]),hasOrders(){return this.tradingHistory.length>0},displayedOrders(){return this.tradingHistory.slice(0,this.displayLimit)}},async created(){try{await this.loadTradingStatus(),await this.loadTradingHistory()}catch(a){console.error("페이지 초기화 오류:",a)}},methods:{...(0,_.i0)("trading",["loadTradingStatus"]),async loadTradingHistory(){this.historyLoading=!0;try{const a=await M.get("/trading/history");a.data.success&&(this.tradingHistory=a.data.data||[])}catch(a){console.error("매매 이력 로드 실패:",a),this.tradingHistory=[],this.$toast?this.$toast.error("매매 이력을 불러오는데 실패했습니다."):console.warn("매매 이력을 불러오는데 실패했습니다.")}finally{this.historyLoading=!1}},async refreshHistory(){await this.loadTradingHistory(),this.$toast&&this.$toast.success("매매 이력이 새로고침되었습니다.")},showMore(){this.displayLimit+=10},toggleAnalysisDetail(a){this.$set(this.expandedAnalysis,a,!this.expandedAnalysis[a])},getOrderTypeText(a){const t={BUY:"매수",SELL:"매도",REBALANCING_SUGGESTION:"리밸런싱 제안"};return t[a]||a},formatDateTime(a){if(!a)return"-";try{const t=new Date(a);if(isNaN(t.getTime()))return"-";const s=new Date,e=s-t,r=Math.floor(e/6e4),o=Math.floor(r/60),i=Math.floor(o/24);return r<1?"방금 전":r<60?`${r}분 전`:o<24?`${o}시간 전`:i<7?`${i}일 전`:t.toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("날짜 포맷 오류:",t),a}},formatPrice(a,t){if(!a||null===a||void 0===a)return"-";try{const s="string"===typeof a?parseFloat(a):a;return isNaN(s)?"-":"domestic"===t?s.toLocaleString()+"원":"$"+s.toFixed(2)}catch(s){return console.error("가격 포맷 오류:",s),"-"}},formatNumber(a){if(!a||null===a||void 0===a)return"0";try{const t="string"===typeof a?parseInt(a):a;return isNaN(t)?"0":t.toLocaleString()}catch(t){return console.error("숫자 포맷 오류:",t),"0"}},getStatusText(a){if(!a)return"알 수 없음";const t={PENDING:"대기",FILLED:"체결",PARTIALLY_FILLED:"부분체결",CANCELLED:"취소",REJECTED:"거부"};return t[a]||a}}};const Ce=(0,w.A)(we,[["render",cs],["__scopeId","data-v-40956b30"]]);var Ee=Ce;const Ae={class:"auth-callback"},Ie={class:"callback-container"},Re={class:"callback-content"},Oe={class:"callback-title"},Xe={class:"callback-message"},Ne={key:0,class:"debug-info"};function $e(a,t,s,e,o,i){return(0,r.uX)(),(0,r.CE)("div",Ae,[(0,r.Lk)("div",Ie,[(0,r.Lk)("div",Re,[t[1]||(t[1]=(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1)),(0,r.Lk)("h2",Oe,(0,n.v_)(o.title),1),(0,r.Lk)("p",Xe,(0,n.v_)(o.message),1),o.showDebug?((0,r.uX)(),(0,r.CE)("div",Ne,[t[0]||(t[0]=(0,r.Lk)("h4",null,"디버그 정보:",-1)),(0,r.Lk)("pre",null,(0,n.v_)(o.debugInfo),1)])):(0,r.Q3)("",!0)])])])}s(4603),s(7566),s(8721);var Me={name:"AuthCallback",data(){return{title:"로그인 처리 중...",message:"잠시만 기다려주세요.",showDebug:!1,debugInfo:{}}},async mounted(){console.log("🎬 AuthCallback 컴포넌트 마운트됨"),await this.handleAuthCallback()},methods:{...(0,_.i0)("auth",["loginWithToken"]),async handleAuthCallback(){try{console.log("🔄 OAuth 콜백 처리 시작");const a=new URLSearchParams(window.location.search),t=a.get("token")||this.$route.query.token,s=a.get("provider")||this.$route.query.provider,e=a.get("name")||this.$route.query.name,r=a.get("error")||this.$route.query.error;if(this.debugInfo={url:window.location.href,queryParams:this.$route.query,urlParams:Object.fromEntries(a),token:t?t.substring(0,20)+"...":"null",provider:s,name:"미연동 계정"===e?"한원석":e?decodeURIComponent(e):"null",error:r},r)throw new Error(`OAuth 오류: ${r}`);if(!t)throw this.showDebug=!0,new Error("토큰이 없습니다. URL 파라미터를 확인해주세요.");console.log("🔐 OAuth 제공자:",s),console.log("👤 사용자 이름:",decodeURIComponent(e||"")),this.message="토큰을 처리하고 있습니다...";const o=await this.loginWithToken(t);if(!o)throw new Error("토큰 처리에 실패했습니다.");console.log("✅ 로그인 성공! 홈으로 이동"),this.title="로그인 완료!",this.message="홈페이지로 이동합니다...",setTimeout(()=>{this.$router.replace("/")},2e3)}catch(a){console.error("❌ Auth callback 오류:",a),this.title="로그인 오류",this.message=`오류: ${a.message}`,this.showDebug=!0,setTimeout(()=>{this.$router.replace({name:"Login",query:{error:"callback_failed"}})},5e3)}}}};const De=(0,w.A)(Me,[["render",$e],["__scopeId","data-v-6e08d704"]]);var xe=De;const Ue={class:"not-found"},Ge={class:"container"},Pe={class:"not-found-content"},Be={class:"error-actions"},Ke={class:"helpful-links"},Fe={class:"links-list"},We={key:0};function He(a,t,s,e,o,i){const l=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ue,[(0,r.Lk)("div",Ge,[(0,r.Lk)("div",Pe,[t[6]||(t[6]=(0,r.Lk)("div",{class:"error-code"},"404",-1)),t[7]||(t[7]=(0,r.Lk)("h1",{class:"error-title"},"페이지를 찾을 수 없습니다",-1)),t[8]||(t[8]=(0,r.Lk)("p",{class:"error-message"}," 요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다. ",-1)),(0,r.Lk)("div",Be,[(0,r.bF)(l,{to:"/",class:"btn btn-primary"},{default:(0,r.k6)(()=>t[1]||(t[1]=[(0,r.eW)(" 홈으로 돌아가기 ",-1)])),_:1,__:[1]}),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...a)=>i.goBack&&i.goBack(...a)),class:"btn btn-outline"}," 이전 페이지 ")]),(0,r.Lk)("div",Ke,[t[5]||(t[5]=(0,r.Lk)("h3",null,"도움이 될 만한 링크",-1)),(0,r.Lk)("ul",Fe,[(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/"},{default:(0,r.k6)(()=>t[2]||(t[2]=[(0,r.eW)("홈페이지",-1)])),_:1,__:[2]})]),(0,r.Lk)("li",null,[(0,r.bF)(l,{to:"/login"},{default:(0,r.k6)(()=>t[3]||(t[3]=[(0,r.eW)("로그인",-1)])),_:1,__:[3]})]),a.isAuthenticated?((0,r.uX)(),(0,r.CE)("li",We,[(0,r.bF)(l,{to:"/trading"},{default:(0,r.k6)(()=>t[4]||(t[4]=[(0,r.eW)("자동매매",-1)])),_:1,__:[4]})])):(0,r.Q3)("",!0)])])])])])}var Qe={name:"NotFound",computed:{...(0,_.L8)("auth",["isAuthenticated"])},methods:{goBack(){window.history.length>1?this.$router.go(-1):this.$router.push("/")}}};const je=(0,w.A)(Qe,[["render",He],["__scopeId","data-v-bb989544"]]);var qe=je;const ze=[{path:"/",name:"Home",component:Ka,meta:{title:"홈 - 주식 자동매매 사이트",requiresAuth:!1}},{path:"/login",name:"Login",component:Za,meta:{title:"로그인 - 주식 자동매매 사이트",requiresAuth:!1}},{path:"/trading",name:"Trading",component:Ee,meta:{title:"자동매매 - 주식 자동매매 사이트",requiresAuth:!0}},{path:"/auth/callback",name:"AuthCallback",component:xe,meta:{title:"로그인 처리 중...",requiresAuth:!1}},{path:"/404",name:"NotFound",component:qe,meta:{title:"페이지를 찾을 수 없습니다",requiresAuth:!1}},{path:"/:pathMatch(.*)*",redirect:"/404"}],Ve=(0,O.aE)({history:(0,O.LA)("/TradeSiteFront/"),routes:ze});Ve.beforeEach((a,t,s)=>{if(console.log("🔄 라우터 이동:",t.path,"→",a.path),document.title=a.meta.title||"주식 자동매매 사이트",a.meta.requiresAuth){const t=J.getters["auth/isAuthenticated"];if(!t)return console.log("🔒 인증 필요 - 로그인 페이지로 이동"),void s({name:"Login",query:{redirect:a.fullPath}})}if("Login"===a.name&&J.getters["auth/isAuthenticated"])return console.log("✅ 이미 로그인됨 - 홈으로 이동"),void s({name:"Home"});s()});var Ye=Ve;s(7917);const Je=(0,e.Ef)(R);Je.use(J),Je.use(Ye),Je.use(D.Ay,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),Je.mount("#app")}},t={};function s(e){var r=t[e];if(void 0!==r)return r.exports;var o=t[e]={exports:{}};return a[e].call(o.exports,o,o.exports,s),o.exports}s.m=a,function(){var a=[];s.O=function(t,e,r,o){if(!e){var i=1/0;for(d=0;d<a.length;d++){e=a[d][0],r=a[d][1],o=a[d][2];for(var l=!0,n=0;n<e.length;n++)(!1&o||i>=o)&&Object.keys(s.O).every(function(a){return s.O[a](e[n])})?e.splice(n--,1):(l=!1,o<i&&(i=o));if(l){a.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=a.length;d>0&&a[d-1][2]>o;d--)a[d]=a[d-1];a[d]=[e,r,o]}}(),function(){s.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return s.d(t,{a:t}),t}}(),function(){s.d=function(a,t){for(var e in t)s.o(t,e)&&!s.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:t[e]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){s.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)}}(),function(){s.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){var a={524:0};s.O.j=function(t){return 0===a[t]};var t=function(t,e){var r,o,i=e[0],l=e[1],n=e[2],c=0;if(i.some(function(t){return 0!==a[t]})){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(n)var d=n(s)}for(t&&t(e);c<i.length;c++)o=i[c],s.o(a,o)&&a[o]&&a[o][0](),a[o]=0;return s.O(d)},e=self["webpackChunktrade_frontend"]=self["webpackChunktrade_frontend"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=s.O(void 0,[504],function(){return s(6829)});e=s.O(e)})();
//# sourceMappingURL=app.23dd6fce.js.map