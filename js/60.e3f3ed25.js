"use strict";(self["webpackChunktrade_frontend"]=self["webpackChunktrade_frontend"]||[]).push([[60],{60:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var r=o(6768),a=o(4232);const s={class:"auth-callback"},n={class:"callback-container"},l={class:"callback-content"},i={class:"callback-title"},c={class:"callback-message"},u={key:0,class:"debug-info"};function h(e,t,o,h,d,g){return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",n,[(0,r.Lk)("div",l,[t[1]||(t[1]=(0,r.Lk)("div",{class:"loading-spinner-large"},null,-1)),(0,r.Lk)("h2",i,(0,a.v_)(d.title),1),(0,r.Lk)("p",c,(0,a.v_)(d.message),1),d.showDebug?((0,r.uX)(),(0,r.CE)("div",u,[t[0]||(t[0]=(0,r.Lk)("h4",null,"ë””ë²„ê·¸ ì •ë³´:",-1)),(0,r.Lk)("pre",null,(0,a.v_)(d.debugInfo),1)])):(0,r.Q3)("",!0)])])])}o(4603),o(7566),o(8721);var d=o(782),g={name:"AuthCallback",data(){return{title:"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘...",message:"ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",showDebug:!1,debugInfo:{}}},async mounted(){console.log("ðŸŽ¬ AuthCallback ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨"),await this.handleAuthCallback()},methods:{...(0,d.i0)("auth",["loginWithToken"]),async handleAuthCallback(){try{console.log("ðŸ”„ OAuth ì½œë°± ì²˜ë¦¬ ì‹œìž‘");const e=new URLSearchParams(window.location.search),t=e.get("token")||this.$route.query.token,o=e.get("provider")||this.$route.query.provider,r=e.get("name")||this.$route.query.name,a=e.get("error")||this.$route.query.error;if(this.debugInfo={url:window.location.href,queryParams:this.$route.query,urlParams:Object.fromEntries(e),token:t?t.substring(0,20)+"...":"null",provider:o,name:"ë¯¸ì—°ë™ ê³„ì •"===r?"í•œì›ì„":r?decodeURIComponent(r):"null",error:a},a)throw new Error(`OAuth ì˜¤ë¥˜: ${a}`);if(!t)throw this.showDebug=!0,new Error("í† í°ì´ ì—†ìŠµë‹ˆë‹¤. URL íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");console.log("ðŸ” OAuth ì œê³µìž:",o),console.log("ðŸ‘¤ ì‚¬ìš©ìž ì´ë¦„:",decodeURIComponent(r||"")),this.message="í† í°ì„ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...";const s=await this.loginWithToken(t);if(!s)throw new Error("í† í° ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ! í™ˆìœ¼ë¡œ ì´ë™"),this.title="ë¡œê·¸ì¸ ì™„ë£Œ!",this.message="í™ˆíŽ˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...",setTimeout(()=>{this.$router.replace("/")},2e3)}catch(e){console.error("âŒ Auth callback ì˜¤ë¥˜:",e),this.title="ë¡œê·¸ì¸ ì˜¤ë¥˜",this.message=`ì˜¤ë¥˜: ${e.message}`,this.showDebug=!0,setTimeout(()=>{this.$router.replace({name:"Login",query:{error:"callback_failed"}})},5e3)}}}},k=o(1241);const b=(0,k.A)(g,[["render",h],["__scopeId","data-v-6e08d704"]]);var m=b}}]);
//# sourceMappingURL=60.e3f3ed25.js.map